<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>è‹±æ–‡è€ƒè©¦ç³»çµ±</title>
  <style>
      * {
          margin: 0;
          padding: 0;
          box-sizing: border-box;
      }

      body {
          font-family: 'Microsoft JhengHei', Arial, sans-serif;
          background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
          min-height: 100vh;
          color: #333;
      }

      .container {
          max-width: 800px;
          margin: 0 auto;
          padding: 20px;
      }

      .header {
          text-align: center;
          color: white;
          margin-bottom: 30px;
      }

      .header h1 {
          font-size: 2.5em;
          margin-bottom: 10px;
          text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
      }

      .main-menu {
          background: white;
          border-radius: 15px;
          padding: 30px;
          box-shadow: 0 10px 30px rgba(0,0,0,0.2);
      }

      .exam-category {
          margin-bottom: 25px;
          padding: 20px;
          border: 2px solid #e0e0e0;
          border-radius: 10px;
          transition: all 0.3s ease;
      }

      .exam-category:hover {
          border-color: #667eea;
          transform: translateY(-2px);
          box-shadow: 0 5px 15px rgba(0,0,0,0.1);
      }

      .category-title {
          font-size: 1.3em;
          font-weight: bold;
          color: #667eea;
          margin-bottom: 15px;
      }

      .category-buttons {
          display: flex;
          gap: 15px;
          flex-wrap: wrap;
      }

      .btn {
          padding: 12px 24px;
          border: none;
          border-radius: 25px;
          cursor: pointer;
          font-size: 16px;
          font-weight: bold;
          transition: all 0.3s ease;
          text-decoration: none;
          display: inline-block;
          text-align: center;
      }

      .btn-primary {
          background: linear-gradient(45deg, #667eea, #764ba2);
          color: white;
      }

      .btn-primary:hover {
          transform: translateY(-2px);
          box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
      }

      .btn-secondary {
          background: #f8f9fa;
          color: #667eea;
          border: 2px solid #667eea;
      }

      .btn-secondary:hover {
          background: #667eea;
          color: white;
      }

      .exam-screen {
          display: none;
          background: white;
          border-radius: 15px;
          padding: 30px;
          box-shadow: 0 10px 30px rgba(0,0,0,0.2);
      }

      .exam-header {
          display: flex;
          justify-content: space-between;
          align-items: center;
          margin-bottom: 30px;
          padding-bottom: 20px;
          border-bottom: 2px solid #e0e0e0;
      }

      .progress-bar {
          background: #e0e0e0;
          height: 10px;
          border-radius: 5px;
          margin: 20px 0;
          overflow: hidden;
      }

      .progress-fill {
          background: linear-gradient(45deg, #667eea, #764ba2);
          height: 100%;
          width: 0%;
          transition: width 0.3s ease;
      }

      .timer {
          font-size: 1.5em;
          font-weight: bold;
          color: #e74c3c;
          background: #fff5f5;
          padding: 10px 20px;
          border-radius: 25px;
          border: 2px solid #e74c3c;
      }

      .question-container {
          margin: 30px 0;
      }

      .question {
          font-size: 1.4em;
          font-weight: bold;
          margin-bottom: 25px;
          color: #333;
          text-align: center;
          padding: 20px;
          background: #f8f9fa;
          border-radius: 10px;
      }

      .options {
          display: grid;
          grid-template-columns: 1fr 1fr;
          gap: 15px;
          margin: 20px 0;
      }

      .option {
          padding: 15px 20px;
          border: 2px solid #e0e0e0;
          border-radius: 10px;
          cursor: pointer;
          transition: all 0.3s ease;
          background: white;
          font-size: 1.1em;
      }

      .option:hover {
          border-color: #667eea;
          background: #f0f4ff;
      }

      .option.selected {
          border-color: #667eea;
          background: #667eea;
          color: white;
      }

      .exam-controls {
          display: flex;
          justify-content: space-between;
          margin-top: 30px;
      }

      .result-screen {
          display: none;
          background: white;
          border-radius: 15px;
          padding: 40px;
          box-shadow: 0 10px 30px rgba(0,0,0,0.2);
          text-align: center;
      }

      .score-display {
          font-size: 3em;
          font-weight: bold;
          color: #667eea;
          margin: 20px 0;
      }

      .score-details {
          background: #f8f9fa;
          padding: 20px;
          border-radius: 10px;
          margin: 20px 0;
      }

      .records-screen {
          display: none;
          background: white;
          border-radius: 15px;
          padding: 30px;
          box-shadow: 0 10px 30px rgba(0,0,0,0.2);
      }

      .record-item {
          display: flex;
          justify-content: space-between;
          align-items: center;
          padding: 15px;
          border-bottom: 1px solid #e0e0e0;
          margin-bottom: 10px;
      }

      .record-item:last-child {
          border-bottom: none;
      }

      .fast-answer-bonus {
          color: #27ae60;
          font-weight: bold;
          animation: pulse 0.5s ease-in-out;
      }

      @keyframes pulse {
          0% { transform: scale(1); }
          50% { transform: scale(1.1); }
          100% { transform: scale(1); }
      }

      .hidden {
          display: none !important;
      }

      @media (max-width: 600px) {
          .options {
              grid-template-columns: 1fr;
          }
          
          .category-buttons {
              flex-direction: column;
          }
          
          .exam-controls {
              flex-direction: column;
              gap: 15px;
          }
      }
  </style>
</head>
<body>
  <div class="container">
      <div class="header">
          <h1>ğŸ“ è‹±æ–‡è€ƒè©¦ç³»çµ±</h1>
          <p>æ¸¬è©¦ä½ çš„è‹±æ–‡è©å½™èƒ½åŠ›ï¼</p>
      </div>

      <!-- ä¸»é¸å–® -->
      <div id="mainMenu" class="main-menu">
          <div class="exam-category">
              <div class="category-title">ğŸ æ°´æœé¡ / ğŸ± å‹•ç‰©é¡</div>
              <div class="category-buttons">
                  <button class="btn btn-primary" onclick="startExam('fruits-animals')">é–‹å§‹è€ƒè©¦</button>
                  <button class="btn btn-secondary" onclick="showRecords('fruits-animals')">æŸ¥çœ‹ç´€éŒ„</button>
              </div>
          </div>

          <div class="exam-category">
              <div class="category-title">ğŸ  å®¶é›»é¡ / ğŸ› æ˜†èŸ²é¡</div>
              <div class="category-buttons">
                  <button class="btn btn-primary" onclick="startExam('appliances-insects')">é–‹å§‹è€ƒè©¦</button>
                  <button class="btn btn-secondary" onclick="showRecords('appliances-insects')">æŸ¥çœ‹ç´€éŒ„</button>
              </div>
          </div>

          <div class="exam-category">
              <div class="category-title">ğŸ“ æè¿°é¡ / ğŸ‘¤ èº«é«”é¡</div>
              <div class="category-buttons">
                  <button class="btn btn-primary" onclick="startExam('descriptions-body')">é–‹å§‹è€ƒè©¦</button>
                  <button class="btn btn-secondary" onclick="showRecords('descriptions-body')">æŸ¥çœ‹ç´€éŒ„</button>
              </div>
          </div>
      </div>

      <!-- è€ƒè©¦ç•«é¢ -->
      <div id="examScreen" class="exam-screen">
          <div class="exam-header">
              <h2 id="examTitle">è€ƒè©¦é€²è¡Œä¸­</h2>
              <div class="timer" id="timer">10</div>
          </div>
          
          <div class="progress-bar">
              <div class="progress-fill" id="progressFill"></div>
          </div>
          
          <div class="question-container">
              <div class="question" id="question">è¼‰å…¥ä¸­...</div>
              <div class="options" id="options"></div>
          </div>
          
          <div class="exam-controls">
              <button class="btn btn-secondary" onclick="abandonExam()">æ”¾æ£„è€ƒè©¦</button>
              <div>
                  <span>é¡Œç›® <span id="currentQuestion">1</span> / <span id="totalQuestions">20</span></span>
              </div>
          </div>
      </div>

      <!-- çµæœç•«é¢ -->
      <div id="resultScreen" class="result-screen">
          <h2>ğŸ‰ è€ƒè©¦å®Œæˆï¼</h2>
          <div class="score-display" id="finalScore">0</div>
          <div class="score-details">
              <p>æ­£ç¢ºé¡Œæ•¸: <span id="correctCount">0</span> / <span id="totalCount">20</span></p>
              <p>åŸºæœ¬åˆ†æ•¸: <span id="baseScore">0</span> åˆ†</p>
              <p>å¿«é€Ÿå›ç­”åŠ åˆ†: <span id="bonusScore">0</span> åˆ†</p>
              <p>ç¸½åˆ†: <span id="totalScore">0</span> åˆ†</p>
          </div>
          <div class="category-buttons">
              <button class="btn btn-primary" onclick="retakeExam()">å†è€ƒä¸€æ¬¡</button>
              <button class="btn btn-secondary" onclick="showRecords(currentCategory)">æŸ¥çœ‹ç´€éŒ„</button>
              <button class="btn btn-secondary" onclick="backToMenu()">è¿”å›ä¸»é¸å–®</button>
          </div>
      </div>

      <!-- ç´€éŒ„ç•«é¢ -->
      <div id="recordsScreen" class="records-screen">
          <h2 id="recordsTitle">è€ƒè©¦ç´€éŒ„</h2>
          <div id="recordsList"></div>
          <div style="text-align: center; margin-top: 30px;">
              <button class="btn btn-secondary" onclick="backToMenu()">è¿”å›ä¸»é¸å–®</button>
          </div>
      </div>
  </div>

  <script>
      // é¡Œåº«è³‡æ–™
      const questionBank = {
          'fruits-animals': [
              // ä¸»é£Ÿé¡ - ä¸­æ–‡é¸è‹±æ–‡
              { q: "ç±³é£¯", options: ["rice", "bread", "noodles", "pasta"], correct: 0 },
              { q: "éºµåŒ…", options: ["rice", "bread", "oatmeal", "porridge"], correct: 1 },
              { q: "éºµæ¢", options: ["pasta", "noodles", "ramen", "udon"], correct: 1 },
              { q: "ç¾©å¤§åˆ©éºµ", options: ["noodles", "pasta", "soba", "vermicelli"], correct: 1 },
              { q: "æ‹‰éºµ", options: ["udon", "ramen", "soba", "noodles"], correct: 1 },
              { q: "çƒé¾éºµ", options: ["ramen", "udon", "soba", "pasta"], correct: 1 },
              { q: "è•éº¥éºµ", options: ["udon", "soba", "ramen", "vermicelli"], correct: 1 },
              { q: "æ²³ç²‰", options: ["vermicelli", "rice noodles", "noodles", "pasta"], correct: 1 },
              { q: "ç±³ç²‰", options: ["rice noodles", "vermicelli", "soba", "udon"], correct: 1 },
              { q: "é¥…é ­", options: ["bun", "steamed bun", "dumpling", "sesame cake"], correct: 1 },
              { q: "åŒ…å­", options: ["steamed bun", "bun", "dumpling", "bread"], correct: 1 },
              { q: "é¤ƒå­", options: ["bun", "dumpling", "steamed bun", "sesame cake"], correct: 1 },
              { q: "ç‡’é¤…", options: ["bread", "sesame cake", "steamed bun", "oatmeal"], correct: 1 },
              { q: "ç²¥", options: ["oatmeal", "porridge", "rice", "bread"], correct: 1 },
              { q: "ç‡•éº¥", options: ["porridge", "oatmeal", "rice", "corn"], correct: 1 },
              { q: "ç‰ç±³", options: ["potato", "corn", "sweet potato", "pumpkin"], correct: 1 },
              { q: "é¦¬éˆ´è–¯", options: ["sweet potato", "potato", "taro", "corn"], correct: 1 },
              { q: "åœ°ç“œ", options: ["potato", "sweet potato", "taro", "pumpkin"], correct: 1 },
              { q: "èŠ‹é ­", options: ["sweet potato", "taro", "potato", "pumpkin"], correct: 1 },
              { q: "å—ç“œ", options: ["sweet potato", "pumpkin", "taro", "corn"], correct: 1 },

              // è‚‰é¡ - ä¸­æ–‡é¸è‹±æ–‡
              { q: "è±¬è‚‰", options: ["beef", "pork", "lamb", "chicken"], correct: 1 },
              { q: "ç‰›è‚‰", options: ["pork", "beef", "lamb", "duck"], correct: 1 },
              { q: "é›è‚‰", options: ["duck", "chicken", "turkey", "goose"], correct: 1 },
              { q: "é´¨è‚‰", options: ["chicken", "duck", "goose", "turkey"], correct: 1 },
              { q: "ç¾Šè‚‰", options: ["beef", "lamb", "pork", "venison"], correct: 1 },
              { q: "ç«è…¿", options: ["bacon", "ham", "sausage", "hot dog"], correct: 1 },
              { q: "é¦™è…¸", options: ["hot dog", "sausage", "ham", "bacon"], correct: 1 },
              { q: "ç†±ç‹—", options: ["sausage", "hot dog", "ham", "patty"], correct: 1 },
              { q: "åŸ¹æ ¹", options: ["ham", "bacon", "sausage", "pork floss"], correct: 1 },
              { q: "è‚‰é¬†", options: ["bacon", "pork floss", "ham", "preserved meat"], correct: 1 },
              { q: "ç‰›æ’", options: ["pork chop", "steak", "beef", "patty"], correct: 1 },
              { q: "ç‚¸é›", options: ["roasted chicken", "fried chicken", "chicken wings", "chicken leg"], correct: 1 },
              { q: "çƒ¤é›", options: ["fried chicken", "roasted chicken", "chicken wings", "barbecue"], correct: 1 },
              { q: "é›ç¿…", options: ["chicken leg", "chicken wings", "fried chicken", "roasted chicken"], correct: 1 },
              { q: "é›è…¿", options: ["chicken wings", "chicken leg", "fried chicken", "duck"], correct: 1 },
              { q: "è±¬æ’", options: ["steak", "pork chop", "char siu", "patty"], correct: 1 },
              { q: "å‰ç‡’", options: ["barbecue", "char siu", "pork chop", "preserved meat"], correct: 1 },
              { q: "ç‡’è‚‰", options: ["char siu", "barbecue", "roasted chicken", "steak"], correct: 1 },
              { q: "è‚‰ä¸¸", options: ["patty", "meatball", "pork chop", "sausage"], correct: 1 },
              { q: "æ¼¢å ¡è‚‰", options: ["meatball", "patty", "steak", "pork chop"], correct: 1 },
              { q: "ç«é›", options: ["chicken", "turkey", "duck", "goose"], correct: 1 },
              { q: "éµè‚‰", options: ["duck", "goose", "turkey", "chicken"], correct: 1 },
              { q: "å…”è‚‰", options: ["lamb", "rabbit", "venison", "duck"], correct: 1 },
              { q: "é¹¿è‚‰", options: ["rabbit", "venison", "lamb", "goose"], correct: 1 },
              { q: "è‡˜è‚‰", options: ["bacon", "preserved meat", "ham", "pork floss"], correct: 1 },

              // æµ·é®®é¡ - ä¸­æ–‡é¸è‹±æ–‡
              { q: "é­š", options: ["shrimp", "fish", "crab", "squid"], correct: 1 },
              { q: "é®­é­š", options: ["tuna", "salmon", "mackerel", "cod"], correct: 1 },
              { q: "é®ªé­š", options: ["salmon", "tuna", "mackerel", "flounder"], correct: 1 },
              { q: "é¯–é­š", options: ["tuna", "mackerel", "salmon", "saury"], correct: 1 },
              { q: "æ¯”ç›®é­š", options: ["cod", "flounder", "grouper", "tilapia"], correct: 1 },
              { q: "è¦", options: ["crab", "shrimp", "lobster", "squid"], correct: 1 },
              { q: "èƒèŸ¹", options: ["shrimp", "crab", "lobster", "octopus"], correct: 1 },
              { q: "é¾è¦", options: ["crab", "lobster", "shrimp", "abalone"], correct: 1 },
              { q: "ç‰¡è £", options: ["clam", "oyster", "scallop", "abalone"], correct: 1 },
              { q: "è›¤èœŠ", options: ["oyster", "clam", "scallop", "sea cucumber"], correct: 1 },
              { q: "æ‰‡è²", options: ["clam", "scallop", "oyster", "dried scallop"], correct: 1 },
              { q: "é­·é­š", options: ["octopus", "squid", "eel", "fish"], correct: 1 },
              { q: "ç« é­š", options: ["squid", "octopus", "eel", "sea cucumber"], correct: 1 },
              { q: "æµ·å¸¶", options: ["laver", "seaweed", "sea cucumber", "fish"], correct: 1 },
              { q: "ç´«èœ", options: ["seaweed", "laver", "sea cucumber", "clam"], correct: 1 },
              { q: "é°»é­š", options: ["squid", "eel", "octopus", "cod"], correct: 1 },
              { q: "é±ˆé­š", options: ["flounder", "cod", "grouper", "salmon"], correct: 1 },
              { q: "çŸ³æ–‘é­š", options: ["cod", "grouper", "flounder", "tilapia"], correct: 1 },
              { q: "è™±ç›®é­š", options: ["tilapia", "milkfish", "grouper", "saury"], correct: 1 },
              { q: "ç§‹åˆ€é­š", options: ["mackerel", "saury", "milkfish", "eel"], correct: 1 },
              { q: "å³éƒ­é­š", options: ["milkfish", "tilapia", "grouper", "flounder"], correct: 1 },
              { q: "æµ·åƒ", options: ["octopus", "sea cucumber", "abalone", "laver"], correct: 1 },
              { q: "é®‘é­š", options: ["sea cucumber", "abalone", "oyster", "lobster"], correct: 1 },
              { q: "å¹²è²", options: ["scallop", "dried scallop", "clam", "oyster"], correct: 1 },
              { q: "é­šä¸¸", options: ["fish", "fish ball", "meatball", "squid"], correct: 1 },

              // è”¬èœé¡ - ä¸­æ–‡é¸è‹±æ–‡
              { q: "é«˜éº—èœ", options: ["lettuce", "cabbage", "bok choy", "spinach"], correct: 1 },
              { q: "è èœ", options: ["cabbage", "spinach", "lettuce", "water spinach"], correct: 1 },
              { q: "é’æ±Ÿèœ", options: ["spinach", "bok choy", "cabbage", "lettuce"], correct: 1 },
              { q: "èµè‹£", options: ["bok choy", "lettuce", "cabbage", "spinach"], correct: 1 },
              { q: "èŠ±æ¤°èœ", options: ["broccoli", "cauliflower", "cabbage", "lettuce"], correct: 1 },
              { q: "é’èŠ±èœ", options: ["cauliflower", "broccoli", "asparagus", "green bean"], correct: 1 },
              { q: "ç´…è˜¿è””", options: ["radish", "carrot", "ginger", "lotus root"], correct: 1 },
              { q: "ç™½è˜¿è””", options: ["carrot", "radish", "ginger", "lotus root"], correct: 1 },
              { q: "æ´‹è”¥", options: ["garlic", "onion", "leek", "ginger"], correct: 1 },
              { q: "å¤§è’œ", options: ["onion", "garlic", "ginger", "leek"], correct: 1 },
              { q: "è–‘", options: ["garlic", "ginger", "onion", "radish"], correct: 1 },
              { q: "éŸ­èœ", options: ["celery", "leek", "green bean", "asparagus"], correct: 1 },
              { q: "èŠ¹èœ", options: ["leek", "celery", "asparagus", "green bean"], correct: 1 },
              { q: "èŒ„å­", options: ["tomato", "eggplant", "bell pepper", "cucumber"], correct: 1 },
              { q: "ç•ªèŒ„", options: ["eggplant", "tomato", "bell pepper", "chili"], correct: 1 },
              { q: "å°é»ƒç“œ", options: ["loofah", "cucumber", "winter melon", "bitter gourd"], correct: 1 },
              { q: "çµ²ç“œ", options: ["cucumber", "loofah", "winter melon", "bitter gourd"], correct: 1 },
              { q: "å†¬ç“œ", options: ["bitter gourd", "winter melon", "loofah", "cucumber"], correct: 1 },
              { q: "è‹¦ç“œ", options: ["winter melon", "bitter gourd", "loofah", "cucumber"], correct: 1 },
              { q: "è¾£æ¤’", options: ["bell pepper", "chili", "tomato", "eggplant"], correct: 1 },
              { q: "é’æ¤’", options: ["chili", "bell pepper", "tomato", "eggplant"], correct: 1 },
              { q: "ç‰ç±³ç­", options: ["bamboo shoot", "baby corn", "asparagus", "bean sprout"], correct: 1 },
              { q: "ç«¹ç­", options: ["baby corn", "bamboo shoot", "asparagus", "lotus root"], correct: 1 },
              { q: "è±†èŠ½èœ", options: ["asparagus", "bean sprout", "baby corn", "green bean"], correct: 1 },
              { q: "ç©ºå¿ƒèœ", options: ["spinach", "water spinach", "bok choy", "lettuce"], correct: 1 },
              { q: "è˜†ç­", options: ["celery", "asparagus", "leek", "green bean"], correct: 1 },
              { q: "å››å­£è±†", options: ["pea", "green bean", "edamame", "bean sprout"], correct: 1 },
              { q: "è±Œè±†", options: ["green bean", "pea", "edamame", "bean sprout"], correct: 1 },
              { q: "æ¯›è±†", options: ["pea", "edamame", "green bean", "bean sprout"], correct: 1 },
              { q: "è“®è—•", options: ["radish", "lotus root", "bamboo shoot", "ginger"], correct: 1 },

              // æ°´æœé¡ - ä¸­æ–‡é¸è‹±æ–‡
              { q: "è˜‹æœ", options: ["orange", "apple", "grape", "pear"], correct: 1 },
              { q: "é¦™è•‰", options: ["mango", "banana", "pineapple", "papaya"], correct: 1 },
              { q: "æ©˜å­", options: ["apple", "orange", "tangerine", "grapefruit"], correct: 1 },
              { q: "è‘¡è„", options: ["cherry", "grape", "blueberry", "strawberry"], correct: 1 },
              { q: "è¥¿ç“œ", options: ["cantaloupe", "watermelon", "papaya", "coconut"], correct: 1 },
              { q: "å“ˆå¯†ç“œ", options: ["watermelon", "cantaloupe", "papaya", "coconut"], correct: 1 },
              { q: "è‰è“", options: ["raspberry", "strawberry", "cherry", "blueberry"], correct: 1 },
              { q: "æ«»æ¡ƒ", options: ["strawberry", "cherry", "grape", "plum"], correct: 1 },
              { q: "æ¡ƒå­", options: ["pear", "peach", "plum", "apricot"], correct: 1 },
              { q: "æ¢¨å­", options: ["peach", "pear", "apple", "plum"], correct: 1 },
              { q: "æª¸æª¬", options: ["lime", "lemon", "orange", "grapefruit"], correct: 1 },
              { q: "èŠå§†", options: ["lemon", "lime", "kiwi", "avocado"], correct: 1 },
              { q: "èŠ’æœ", options: ["papaya", "mango", "pineapple", "banana"], correct: 1 },
              { q: "é³³æ¢¨", options: ["mango", "pineapple", "papaya", "coconut"], correct: 1 },
              { q: "å¥‡ç•°æœ", options: ["avocado", "kiwi", "lime", "grape"], correct: 1 },
              { q: "é…ªæ¢¨", options: ["kiwi", "avocado", "lime", "coconut"], correct: 1 },
              { q: "è—è“", options: ["blackberry", "blueberry", "raspberry", "grape"], correct: 1 },
              { q: "è¦†ç›†å­", options: ["blueberry", "raspberry", "strawberry", "blackberry"], correct: 1 },
              { q: "é»‘è“", options: ["raspberry", "blackberry", "blueberry", "mulberry"], correct: 1 },
              { q: "æ¤°å­", options: ["avocado", "coconut", "cantaloupe", "watermelon"], correct: 1 },
              { q: "æœ¨ç“œ", options: ["mango", "papaya", "pineapple", "cantaloupe"], correct: 1 },
              { q: "ç«é¾æœ", options: ["kiwi", "dragon fruit", "star fruit", "passion fruit"], correct: 1 },
              { q: "è”æ", options: ["longan", "lychee", "rambutan", "mangosteen"], correct: 1 },
              { q: "é¾çœ¼", options: ["lychee", "longan", "rambutan", "jujube"], correct: 1 },
              { q: "æŸ¿å­", options: ["apricot", "persimmon", "plum", "fig"], correct: 1 },
              { q: "è‘¡è„æŸš", options: ["orange", "grapefruit", "tangerine", "lemon"], correct: 1 },
              { q: "æ©™å­", options: ["orange", "tangerine", "grapefruit", "lemon"], correct: 1 },
              { q: "æå­", options: ["peach", "plum", "apricot", "cherry"], correct: 1 },
              { q: "æå­", options: ["plum", "apricot", "peach", "persimmon"], correct: 1 },
              { q: "ç„¡èŠ±æœ", options: ["persimmon", "fig", "pomegranate", "guava"], correct: 1 },
              { q: "çŸ³æ¦´", options: ["fig", "pomegranate", "guava", "passion fruit"], correct: 1 },
              { q: "ç™¾é¦™æœ", options: ["guava", "passion fruit", "dragon fruit", "star fruit"], correct: 1 },
              { q: "ç•ªçŸ³æ¦´", options: ["passion fruit", "guava", "pomegranate", "fig"], correct: 1 },
              { q: "è“®éœ§", options: ["guava", "wax apple", "sugar apple", "star fruit"], correct: 1 },
              { q: "æ¥Šæ¡ƒ", options: ["dragon fruit", "star fruit", "passion fruit", "wax apple"], correct: 1 },
              { q: "é‡‹è¿¦", options: ["wax apple", "sugar apple", "guava", "durian"], correct: 1 },
              { q: "æ¦´æ§¤", options: ["sugar apple", "durian", "mangosteen", "rambutan"], correct: 1 },
              { q: "å±±ç«¹", options: ["durian", "mangosteen", "rambutan", "lychee"], correct: 1 },
              { q: "ç´…æ¯›ä¸¹", options: ["lychee", "rambutan", "longan", "mangosteen"], correct: 1 },
              { q: "æ£—å­", options: ["longan", "jujube", "loquat", "persimmon"], correct: 1 },
              { q: "æ‡æ·", options: ["jujube", "loquat", "apricot", "persimmon"], correct: 1 },
              { q: "æ¡‘è‘š", options: ["blackberry", "mulberry", "blueberry", "blackcurrant"], correct: 1 },
              { q: "è‘¡è„ä¹¾", options: ["grape", "raisin", "cranberry", "goji berry"], correct: 1 },
              { q: "è”“è¶Šè“", options: ["raisin", "cranberry", "goji berry", "blackcurrant"], correct: 1 },
              { q: "é»‘é†‹æ —", options: ["redcurrant", "blackcurrant", "cranberry", "blackberry"], correct: 1 },
              { q: "ç´…é†‹æ —", options: ["blackcurrant", "redcurrant", "cranberry", "raspberry"], correct: 1 },
              { q: "æ¸æ", options: ["cranberry", "goji berry", "raisin", "jujube"], correct: 1 },

              è±†é¡è£½å“ (15å€‹)
              // è±†é¡å …æœ - ä¸­æ–‡é¸è‹±æ–‡
              { q: "è±†è…", options: ["soy milk", "tofu", "dried tofu", "tofu skin"], correct: 1 },
              { q: "è±†æ¼¿", options: ["tofu", "soy milk", "miso", "natto"], correct: 1 },
              { q: "è±†å¹²", options: ["tofu", "dried tofu", "fried tofu", "tofu skin"], correct: 1 },
              { q: "æ²¹è±†è…", options: ["dried tofu", "fried tofu", "stinky tofu", "tofu"], correct: 1 },
              { q: "è‡­è±†è…", options: ["fried tofu", "stinky tofu", "dried tofu", "tofu skin"], correct: 1 },
              { q: "è±†çš®", options: ["dried tofu", "tofu skin", "fried tofu", "soy milk"], correct: 1 },
              { q: "ç´è±†", options: ["miso", "natto", "tofu", "soy milk"], correct: 1 },
              { q: "å‘³å™Œ", options: ["natto", "miso", "soy milk", "tofu"], correct: 1 },
              { q: "ç´…è±†", options: ["mung bean", "red bean", "black bean", "green bean"], correct: 1 },
              { q: "ç¶ è±†", options: ["red bean", "mung bean", "black bean", "green bean"], correct: 1 },
              { q: "é»‘è±†", options: ["red bean", "black bean", "mung bean", "soy bean"], correct: 1 },
              { q: "èŠ±ç”Ÿ", options: ["cashew", "peanut", "almond", "walnut"], correct: 1 },
              { q: "è…°æœ", options: ["peanut", "cashew", "almond", "walnut"], correct: 1 },
              { q: "æä»", options: ["walnut", "almond", "cashew", "peanut"], correct: 1 },
              { q: "æ ¸æ¡ƒ", options: ["almond", "walnut", "cashew", "peanut"], correct: 1 },

              // ä¹³è£½å“ - ä¸­æ–‡é¸è‹±æ–‡
              { q: "ç‰›å¥¶", options: ["cream", "milk", "soy milk", "milk powder"], correct: 1 },
              { q: "èµ·å¸", options: ["butter", "cheese", "cheddar", "cream"], correct: 1 },
              { q: "å¥¶æ²¹", options: ["cream", "butter", "milk", "yogurt"], correct: 1 },
              { q: "å„ªæ ¼", options: ["pudding", "yogurt", "cream", "milk"], correct: 1 },
              { q: "é®®å¥¶æ²¹", options: ["butter", "cream", "milk", "condensed milk"], correct: 1 },
              { q: "ç…‰ä¹³", options: ["milk", "condensed milk", "cream", "milk powder"], correct: 1 },
              { q: "å¥¶ç²‰", options: ["condensed milk", "milk powder", "milk", "cream"], correct: 1 },
              { q: "å†°æ·‡æ·‹", options: ["milkshake", "ice cream", "pudding", "yogurt"], correct: 1 },
              { q: "å¸ƒä¸", options: ["yogurt", "pudding", "ice cream", "cream"], correct: 1 },
              { q: "å¥¶æ˜”", options: ["ice cream", "milkshake", "milk", "cream"], correct: 1 },
              { q: "èµ·å¸è›‹ç³•", options: ["ice cream", "cheesecake", "pudding", "cake"], correct: 1 },
              { q: "åˆ‡é”èµ·å¸", options: ["cheese", "cheddar", "butter", "cream"], correct: 1 },

              // ç”œé»ç³•é¤… - ä¸­æ–‡é¸è‹±æ–‡
              { q: "é¤…ä¹¾", options: ["cake", "cookie", "cracker", "waffle"], correct: 1 },
              { q: "è›‹ç³•", options: ["cookie", "cake", "pie", "rice cake"], correct: 1 },
              { q: "å·§å…‹åŠ›", options: ["candy", "chocolate", "cocoa", "cookie"], correct: 1 },
              { q: "ç³–æœ", options: ["chocolate", "candy", "marshmallow", "jelly"], correct: 1 },
              { q: "æ£‰èŠ±ç³–", options: ["candy", "marshmallow", "jelly", "cotton"], correct: 1 },
              { q: "æœå‡", options: ["marshmallow", "jelly", "pudding", "mousse"], correct: 1 },
              { q: "ç”œç”œåœˆ", options: ["cookie", "donut", "bagel", "cake"], correct: 1 },
              { q: "é¦¬å¡é¾", options: ["cookie", "macaron", "cream puff", "souffle"], correct: 1 },
              { q: "æ³¡èŠ™", options: ["macaron", "cream puff", "souffle", "donut"], correct: 1 },
              { q: "é¬†é¤…", options: ["pancake", "waffle", "cake", "cookie"], correct: 1 },
              { q: "è–„é¤…", options: ["waffle", "pancake", "crepe", "cake"], correct: 1 },
              { q: "æ´¾", options: ["cake", "pie", "tart", "pizza"], correct: 1 },
              { q: "ææ‹‰ç±³è˜‡", options: ["mousse", "tiramisu", "souffle", "cake"], correct: 1 },
              { q: "æ…•æ–¯", options: ["tiramisu", "mousse", "souffle", "pudding"], correct: 1 },
              { q: "èˆ’èŠ™è•¾", options: ["mousse", "souffle", "cream puff", "tiramisu"], correct: 1 },
              { q: "å¹´ç³•", options: ["cake", "rice cake", "mochi", "dumpling"], correct: 1 },
              { q: "æ¹¯åœ“", options: ["dumpling", "tangyuan", "mochi", "rice cake"], correct: 1 },

              // é€Ÿé£Ÿè¼•é£Ÿ - ä¸­æ–‡é¸è‹±æ–‡
              { q: "æ¼¢å ¡", options: ["sandwich", "hamburger", "burger", "hot dog"], correct: 1 },
              { q: "è–¯æ¢", options: ["potato chips", "french fries", "fries", "chips"], correct: 1 },
              { q: "æŠ«è–©", options: ["pie", "pizza", "pancake", "flatbread"], correct: 1 },
              { q: "ä¸‰æ˜æ²»", options: ["hamburger", "sandwich", "toast", "submarine sandwich"], correct: 1 },
              { q: "æ½›è‰‡å ¡", options: ["sandwich", "submarine sandwich", "hamburger", "hot dog"], correct: 1 },
              { q: "å¯æ¨‚é¤…", options: ["nuggets", "croquette", "fritter", "dumpling"], correct: 1 },
              { q: "é›å¡Š", options: ["croquette", "chicken nuggets", "fried chicken", "popcorn chicken"], correct: 1 },
              { q: "æ´‹è”¥åœˆ", options: ["french fries", "onion rings", "fried onion", "rings"], correct: 1 },
              { q: "è›‹é¤…", options: ["pancake", "egg pancake", "omelet", "crepe"], correct: 1 },
              { q: "è‚‰åŒ…", options: ["dumpling", "meat bun", "steamed bun", "bao"], correct: 1 },
              { q: "ä¾¿ç•¶", options: ["lunch box", "bento", "meal", "takeout"], correct: 1 },

              // èª¿å‘³æ–™é…æ–™ - ä¸­æ–‡é¸è‹±æ–‡
              { q: "é›è›‹", options: ["duck egg", "egg", "century egg", "yolk"], correct: 1 },
              { q: "é¹¹é´¨è›‹", options: ["egg", "salted duck egg", "century egg", "duck egg"], correct: 1 },
              { q: "çš®è›‹", options: ["salted duck egg", "century egg", "preserved egg", "black egg"], correct: 1 },
              { q: "èœ‚èœœ", options: ["syrup", "honey", "jam", "sugar"], correct: 1 },
              { q: "æœé†¬", options: ["honey", "jam", "jelly", "preserve"], correct: 1 },
              { q: "èŠ±ç”Ÿé†¬", options: ["jam", "peanut butter", "butter", "nut butter"], correct: 1 },
              { q: "èŠéº»", options: ["seed", "sesame", "sunflower", "peanut"], correct: 1 },
              { q: "é†‹", options: ["sauce", "vinegar", "wine", "acid"], correct: 1 },
              { q: "é†¬æ²¹", options: ["vinegar", "soy sauce", "fish sauce", "oyster sauce"], correct: 1 },
              { q: "é¹½", options: ["sugar", "salt", "pepper", "powder"], correct: 1 },
              { q: "ç³–", options: ["salt", "sugar", "honey", "syrup"], correct: 1 },
              { q: "èƒ¡æ¤’", options: ["salt", "pepper", "spice", "chili"], correct: 1 },
              { q: "è¾£æ¤’ç²‰", options: ["pepper", "chili powder", "curry powder", "paprika"], correct: 1 },
              { q: "å’–å“©ç²‰", options: ["chili powder", "curry powder", "turmeric", "spice"], correct: 1 },
              { q: "ç•ªèŒ„é†¬", options: ["sauce", "ketchup", "tomato sauce", "paste"], correct: 1 },
              { q: "ç¾ä¹ƒæ»‹", options: ["ketchup", "mayonnaise", "cream", "dressing"], correct: 1 },
              { q: "èŠ¥æœ«", options: ["mayonnaise", "mustard", "wasabi", "horseradish"], correct: 1 },
              { q: "æ©„æ¬–æ²¹", options: ["oil", "olive oil", "vegetable oil", "cooking oil"], correct: 1 },
              { q: "é¦™è‰", options: ["herb", "vanilla", "mint", "basil"], correct: 1 },
              { q: "è‚‰æ¡‚", options: ["vanilla", "cinnamon", "nutmeg", "clove"], correct: 1 }              
          ],

          'appliances-insects': [
              {q: 'Refrigerator', options: ['å†°ç®±', 'æ´—è¡£æ©Ÿ', 'çƒ¤ç®±', 'å¾®æ³¢çˆ'], correct: 0},
              {q: 'Butterfly', options: ['èœœèœ‚', 'è´è¶', 'èœ»èœ“', 'èèŸ»'], correct: 1},
              {q: 'Television', options: ['æ”¶éŸ³æ©Ÿ', 'é›»è¦–', 'é›»è…¦', 'æ‰‹æ©Ÿ'], correct: 1},
              {q: 'Ant', options: ['èèŸ»', 'èœ˜è››', 'èŸ‘è‚', 'èšŠå­'], correct: 0},
              {q: 'Washing Machine', options: ['æ´—ç¢—æ©Ÿ', 'çƒ˜ä¹¾æ©Ÿ', 'æ´—è¡£æ©Ÿ', 'å¸å¡µå™¨'], correct: 2},
              {q: 'Bee', options: ['é»ƒèœ‚', 'èœœèœ‚', 'å¤§é»ƒèœ‚', 'è’¼è‡'], correct: 1},
              {q: 'Microwave', options: ['çƒ¤ç®±', 'å¾®æ³¢çˆ', 'é›»é‹', 'æ°£ç‚¸é‹'], correct: 1},
              {q: 'Spider', options: ['èœ˜è››', 'è å­', 'èœˆèš£', 'å£è™'], correct: 0},
              {q: 'Air Conditioner', options: ['é›»é¢¨æ‰‡', 'é™¤æ¿•æ©Ÿ', 'å†·æ°£æ©Ÿ', 'æš–æ°£æ©Ÿ'], correct: 2},
              {q: 'Mosquito', options: ['èšŠå­', 'è’¼è‡', 'èš‹', 'è “'], correct: 0},
              {q: 'Vacuum Cleaner', options: ['æƒæŠŠ', 'æ‹–æŠŠ', 'å¸å¡µå™¨', 'è’¸æ°£æ‹–æŠŠ'], correct: 2},
              {q: 'Dragonfly', options: ['è´è¶', 'èœ»èœ“', 'è›¾', 'èš±èœ¢'], correct: 1},
              {q: 'Dishwasher', options: ['æ´—è¡£æ©Ÿ', 'æ´—ç¢—æ©Ÿ', 'çƒ˜ç¢—æ©Ÿ', 'æ¶ˆæ¯’æ«ƒ'], correct: 1},
              {q: 'Cockroach', options: ['ç”²èŸ²', 'èŸ‘è‚', 'èŸ‹èŸ€', 'èèš±'], correct: 1},
              {q: 'Oven', options: ['çƒ¤ç®±', 'å¾®æ³¢çˆ', 'è’¸çˆ', 'é›»é‹'], correct: 0},
              {q: 'Grasshopper', options: ['èš±èœ¢', 'èŸ‹èŸ€', 'èèš±', 'è—èŸ²'], correct: 0},
              {q: 'Blender', options: ['æœæ±æ©Ÿ', 'æ”ªæ‹Œæ©Ÿ', 'é£Ÿç‰©èª¿ç†æ©Ÿ', 'å’–å•¡æ©Ÿ'], correct: 1},
              {q: 'Ladybug', options: ['ç“¢èŸ²', 'é‡‘é¾œå­', 'ç¨è§’ä»™', 'é¬å½¢èŸ²'], correct: 0},
              {q: 'Hair Dryer', options: ['å¹é¢¨æ©Ÿ', 'ç›´é«®å™¨', 'æ²é«®å™¨', 'ç†é«®å™¨'], correct: 0},
              {q: 'Beetle', options: ['èŸ¬', 'ç”²èŸ²', 'è‰', 'é‡‘èŸ¬'], correct: 1}
          ],
          'descriptions-body': [
              {q: 'Beautiful', options: ['ç¾éº—çš„', 'é†œé™‹çš„', 'å¯æ„›çš„', 'è¿·äººçš„'], correct: 0},
              {q: 'Head', options: ['æ‰‹', 'è…³', 'é ­', 'èº«é«”'], correct: 2},
              {q: 'Happy', options: ['æ‚²å‚·çš„', 'å¿«æ¨‚çš„', 'ç”Ÿæ°£çš„', 'å®³æ€•çš„'], correct: 1},
              {q: 'Hand', options: ['æ‰‹', 'è…³', 'è‡‚', 'æŒ‡'], correct: 0},
              {q: 'Big', options: ['å°çš„', 'å¤§çš„', 'é«˜çš„', 'çŸ®çš„'], correct: 1},
              {q: 'Eye', options: ['è€³æœµ', 'é¼»å­', 'çœ¼ç›', 'å˜´å·´'], correct: 2},
              {q: 'Cold', options: ['ç†±çš„', 'æº«æš–çš„', 'å†·çš„', 'æ¶¼çš„'], correct: 2},
              {q: 'Foot', options: ['æ‰‹', 'è…³', 'è…¿', 'è†è“‹'], correct: 1},
              {q: 'Fast', options: ['æ…¢çš„', 'å¿«çš„', 'æ€¥çš„', 'ç·©çš„'], correct: 1},
              {q: 'Nose', options: ['çœ¼ç›', 'è€³æœµ', 'é¼»å­', 'å˜´å·´'], correct: 2},
              {q: 'Tall', options: ['çŸ®çš„', 'é«˜çš„', 'å¤§çš„', 'å°çš„'], correct: 1},
              {q: 'Mouth', options: ['é¼»å­', 'å˜´å·´', 'ä¸‹å·´', 'è‡‰é °'], correct: 1},
              {q: 'Heavy', options: ['è¼•çš„', 'é‡çš„', 'åšçš„', 'è–„çš„'], correct: 1},
              {q: 'Ear', options: ['è€³æœµ', 'çœ¼ç›', 'é¼»å­', 'é ­é«®'], correct: 0},
              {q: 'Bright', options: ['æš—çš„', 'äº®çš„', 'é»‘çš„', 'ç™½çš„'], correct: 1},
              {q: 'Arm', options: ['è…¿', 'æ‰‹è‡‚', 'è‚©è†€', 'æ‰‹è‚˜'], correct: 1},
              {q: 'Soft', options: ['ç¡¬çš„', 'è»Ÿçš„', 'ç²—çš„', 'ç´°çš„'], correct: 1},
              {q: 'Leg', options: ['æ‰‹', 'è…¿', 'è…³', 'è†è“‹'], correct: 1},
              {q: 'Strong', options: ['å¼±çš„', 'å¼·çš„', 'å£¯çš„', 'ç˜¦çš„'], correct: 1},
              {q: 'Finger', options: ['æ‰‹æŒ‡', 'è…³è¶¾', 'æ‰‹æŒ', 'æ‰‹è…•'], correct: 0}
          ]
      };

// ========== è€ƒè©¦è¨­å®šå€ (å¯è‡ªç”±ä¿®æ”¹) ==========
const EXAM_CONFIG = {
    // è€ƒé¡Œè¨­å®š
    QUESTION_COUNT: 10,          // è€ƒé¡Œæ•¸é‡ (è¨­ç‚º 0 è¡¨ç¤ºå…¨éƒ¨é¡Œç›®)
    
    // æ™‚é–“è¨­å®š
    TIME_PER_QUESTION: 10,       // æ¯é¡Œæ™‚é–“ (ç§’)
    FAST_ANSWER_TIME: 3,         // å¿«é€Ÿå›ç­”æ™‚é–“é–€æª» (ç§’)
    ANSWER_DISPLAY_TIME: 1.5,    // ç­”æ¡ˆé¡¯ç¤ºæ™‚é–“ (ç§’)
    
    // åˆ†æ•¸è¨­å®š
    BASE_POINTS: 10,             // åŸºæœ¬åˆ†æ•¸
    BONUS_POINTS: 5,             // å¿«é€Ÿå›ç­”åŠ åˆ†
    
    // å…¶ä»–è¨­å®š
    SHUFFLE_QUESTIONS: true,     // æ˜¯å¦éš¨æ©Ÿæ’åˆ—é¡Œç›®
    SHUFFLE_OPTIONS: true,       // æ˜¯å¦éš¨æ©Ÿæ’åˆ—é¸é …
    SHOW_PROGRESS: true,         // æ˜¯å¦é¡¯ç¤ºé€²åº¦æ¢
    AUTO_NEXT: true              // æ˜¯å¦è‡ªå‹•é€²å…¥ä¸‹ä¸€é¡Œ
};
// ===============================================

// å…¨åŸŸè®Šæ•¸
let currentCategory = '';
let currentQuestions = [];
let currentQuestionIndex = 0;
let score = 0;
let correctAnswers = 0;
let bonusPoints = 0;
let timer = null;
let timeLeft = EXAM_CONFIG.TIME_PER_QUESTION;
let questionStartTime = 0;

// é–‹å§‹è€ƒè©¦
function startExam(category) {
    currentCategory = category;
    
    // æ ¹æ“šè¨­å®šæº–å‚™é¡Œç›®
    let allQuestions = [...questionBank[category]];
    if (EXAM_CONFIG.QUESTION_COUNT === 0 || EXAM_CONFIG.QUESTION_COUNT >= allQuestions.length) {
        currentQuestions = EXAM_CONFIG.SHUFFLE_QUESTIONS ? shuffleArray(allQuestions) : allQuestions;
    } else {
        currentQuestions = EXAM_CONFIG.SHUFFLE_QUESTIONS ? 
            shuffleArray(allQuestions).slice(0, EXAM_CONFIG.QUESTION_COUNT) : 
            allQuestions.slice(0, EXAM_CONFIG.QUESTION_COUNT);
    }
    
    currentQuestionIndex = 0;
    score = 0;
    correctAnswers = 0;
    bonusPoints = 0;
    
    // éš¨æ©ŸåŒ–é¸é …ä½ç½® (æ ¹æ“šè¨­å®š)
    if (EXAM_CONFIG.SHUFFLE_OPTIONS) {
        currentQuestions.forEach(q => {
            const correctAnswer = q.options[q.correct];
            q.options = shuffleArray([...q.options]);
            q.correct = q.options.indexOf(correctAnswer);
        });
    }
    
    document.getElementById('mainMenu').style.display = 'none';
    document.getElementById('examScreen').style.display = 'block';
    
    const titles = {
        'fruits-animals': 'ğŸ æ°´æœé¡ / ğŸ± å‹•ç‰©é¡',
        'appliances-insects': 'ğŸ  å®¶é›»é¡ / ğŸ› æ˜†èŸ²é¡',
        'descriptions-body': 'ğŸ“ æè¿°é¡ / ğŸ‘¤ èº«é«”é¡'
    };
    
    document.getElementById('examTitle').textContent = titles[category];
    document.getElementById('totalQuestions').textContent = currentQuestions.length;
    
    showQuestion();
}

// é¡¯ç¤ºé¡Œç›®
function showQuestion() {
    if (currentQuestionIndex >= currentQuestions.length) {
        showResult();
        return;
    }
    
    const question = currentQuestions[currentQuestionIndex];
    document.getElementById('question').textContent = question.q;
    document.getElementById('currentQuestion').textContent = currentQuestionIndex + 1;
    
    const optionsContainer = document.getElementById('options');
    optionsContainer.innerHTML = '';
    
    question.options.forEach((option, index) => {
        const optionDiv = document.createElement('div');
        optionDiv.className = 'option';
        optionDiv.textContent = option;
        optionDiv.onclick = () => selectAnswer(index);
        optionsContainer.appendChild(optionDiv);
    });
    
    // æ›´æ–°é€²åº¦æ¢ (æ ¹æ“šè¨­å®š)
    if (EXAM_CONFIG.SHOW_PROGRESS) {
        const progress = ((currentQuestionIndex) / currentQuestions.length) * 100;
        document.getElementById('progressFill').style.width = progress + '%';
    }
    
    // é–‹å§‹è¨ˆæ™‚
    startTimer();
}

// é–‹å§‹è¨ˆæ™‚å™¨
function startTimer() {
    timeLeft = EXAM_CONFIG.TIME_PER_QUESTION;
    questionStartTime = Date.now();
    updateTimerDisplay();
    
    timer = setInterval(() => {
        timeLeft--;
        updateTimerDisplay();
        
        if (timeLeft <= 0) {
            clearInterval(timer);
            selectAnswer(-1); // æ™‚é–“åˆ°ï¼Œè‡ªå‹•é¸æ“‡éŒ¯èª¤ç­”æ¡ˆ
        }
    }, 1000);
}

// æ›´æ–°è¨ˆæ™‚å™¨é¡¯ç¤º
function updateTimerDisplay() {
    const timerElement = document.getElementById('timer');
    timerElement.textContent = timeLeft;
    
    if (timeLeft <= 3) {
        timerElement.style.color = '#e74c3c';
        timerElement.style.animation = 'pulse 0.5s infinite';
    } else {
        timerElement.style.color = '#27ae60';
        timerElement.style.animation = 'none';
    }
}

// é¸æ“‡ç­”æ¡ˆ
function selectAnswer(selectedIndex) {
    clearInterval(timer);
    
    const question = currentQuestions[currentQuestionIndex];
    const options = document.querySelectorAll('.option');
    
    // é¡¯ç¤ºæ­£ç¢ºç­”æ¡ˆ
    options.forEach((option, index) => {
        if (index === question.correct) {
            option.style.background = '#27ae60';
            option.style.color = 'white';
            option.style.borderColor = '#27ae60';
        } else if (index === selectedIndex && selectedIndex !== question.correct) {
            option.style.background = '#e74c3c';
            option.style.color = 'white';
            option.style.borderColor = '#e74c3c';
        }
        option.style.pointerEvents = 'none';
    });
    
    // è¨ˆç®—åˆ†æ•¸
    if (selectedIndex === question.correct) {
        correctAnswers++;
        score += EXAM_CONFIG.BASE_POINTS; // ä½¿ç”¨è¨­å®šçš„åŸºæœ¬åˆ†æ•¸
        
        // æª¢æŸ¥å¿«é€Ÿå›ç­”åŠ åˆ†
        const answerTime = (Date.now() - questionStartTime) / 1000;
        if (answerTime <= EXAM_CONFIG.FAST_ANSWER_TIME) {
            bonusPoints += EXAM_CONFIG.BONUS_POINTS;
            score += EXAM_CONFIG.BONUS_POINTS;
            
            // é¡¯ç¤ºå¿«é€Ÿå›ç­”æç¤º
            const bonusDiv = document.createElement('div');
            bonusDiv.className = 'fast-answer-bonus';
            bonusDiv.textContent = `âš¡ å¿«é€Ÿå›ç­” +${EXAM_CONFIG.BONUS_POINTS}åˆ†!`;
            bonusDiv.style.position = 'fixed';
            bonusDiv.style.top = '50%';
            bonusDiv.style.left = '50%';
            bonusDiv.style.transform = 'translate(-50%, -50%)';
            bonusDiv.style.fontSize = '1.5em';
            bonusDiv.style.zIndex = '1000';
            document.body.appendChild(bonusDiv);
            
            setTimeout(() => {
                document.body.removeChild(bonusDiv);
            }, 1500);
        }
    }
    
    // å»¶é²é¡¯ç¤ºä¸‹ä¸€é¡Œ (ä½¿ç”¨è¨­å®šçš„ç­‰å¾…æ™‚é–“)
    if (EXAM_CONFIG.AUTO_NEXT) {
        setTimeout(() => {
            currentQuestionIndex++;
            showQuestion();
        }, EXAM_CONFIG.ANSWER_DISPLAY_TIME * 1000);
    }
}

// é¡¯ç¤ºçµæœ
function showResult() {
    document.getElementById('examScreen').style.display = 'none';
    document.getElementById('resultScreen').style.display = 'block';
    
    const baseScore = correctAnswers * EXAM_CONFIG.BASE_POINTS;
    
    document.getElementById('finalScore').textContent = score + ' åˆ†';
    document.getElementById('correctCount').textContent = correctAnswers;
    document.getElementById('totalCount').textContent = currentQuestions.length;
    document.getElementById('baseScore').textContent = baseScore;
    document.getElementById('bonusScore').textContent = bonusPoints;
    document.getElementById('totalScore').textContent = score;
    
    // å„²å­˜è¨˜éŒ„
    saveRecord();
}

// å„²å­˜è¨˜éŒ„
function saveRecord() {
    const records = JSON.parse(localStorage.getItem('examRecords') || '{}');
    if (!records[currentCategory]) {
        records[currentCategory] = [];
    }
    
    const record = {
        date: new Date().toLocaleString('zh-TW'),
        score: score,
        correct: correctAnswers,
        total: currentQuestions.length,
        bonus: bonusPoints
    };
    
    records[currentCategory].push(record);
    records[currentCategory].sort((a, b) => b.score - a.score); // æŒ‰åˆ†æ•¸æ’åº
    
    localStorage.setItem('examRecords', JSON.stringify(records));
}

// é¡¯ç¤ºè¨˜éŒ„
function showRecords(category) {
    currentCategory = category;
    document.getElementById('mainMenu').style.display = 'none';
    document.getElementById('recordsScreen').style.display = 'block';
    
    const titles = {
        'fruits-animals': 'ğŸ æ°´æœé¡ / ğŸ± å‹•ç‰©é¡',
        'appliances-insects': 'ğŸ  å®¶é›»é¡ / ğŸ› æ˜†èŸ²é¡',
        'descriptions-body': 'ğŸ“ æè¿°é¡ / ğŸ‘¤ èº«é«”é¡'
    };
    
    document.getElementById('recordsTitle').textContent = titles[category] + ' - è€ƒè©¦ç´€éŒ„';
    
    const records = JSON.parse(localStorage.getItem('examRecords') || '{}');
    const categoryRecords = records[category] || [];
    
    const recordsList = document.getElementById('recordsList');
    recordsList.innerHTML = '';
    
    if (categoryRecords.length === 0) {
        recordsList.innerHTML = '<p style="text-align: center; color: #666;">å°šç„¡è€ƒè©¦è¨˜éŒ„</p>';
    } else {
        categoryRecords.forEach((record, index) => {
            const recordDiv = document.createElement('div');
            recordDiv.className = 'record-item';
            recordDiv.innerHTML = `
                <div>
                    <strong>#${index + 1}</strong> ${record.date}
                </div>
                <div>
                    <span style="color: #667eea; font-weight: bold;">${record.score}åˆ†</span>
                    <small>(${record.correct}/${record.total}) ${record.bonus > 0 ? '+' + record.bonus + 'å¿«é€Ÿåˆ†' : ''}</small>
                </div>
            `;
            recordsList.appendChild(recordDiv);
        });
    }
}

// æ”¾æ£„è€ƒè©¦
function abandonExam() {
    if (confirm('ç¢ºå®šè¦æ”¾æ£„è€ƒè©¦å—ï¼Ÿ')) {
        clearInterval(timer);
        backToMenu();
    }
}

// å†è€ƒä¸€æ¬¡
function retakeExam() {
    startExam(currentCategory);
}

// è¿”å›ä¸»é¸å–®
function backToMenu() {
    document.getElementById('examScreen').style.display = 'none';
    document.getElementById('resultScreen').style.display = 'none';
    document.getElementById('recordsScreen').style.display = 'none';
    document.getElementById('mainMenu').style.display = 'block';
}

// æ´—ç‰Œå‡½æ•¸
function shuffleArray(array) {
    const shuffled = [...array];
    for (let i = shuffled.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
    }
    return shuffled;
}
  </script>
</body>
</html>
