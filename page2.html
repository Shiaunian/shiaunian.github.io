<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>英文考試系統</title>
  <style>
      * {
          margin: 0;
          padding: 0;
          box-sizing: border-box;
      }

      body {
          font-family: 'Microsoft JhengHei', Arial, sans-serif;
          background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
          min-height: 100vh;
          color: #333;
      }

      .container {
          max-width: 800px;
          margin: 0 auto;
          padding: 20px;
      }

      .header {
          text-align: center;
          color: white;
          margin-bottom: 30px;
      }

      .header h1 {
          font-size: 2.5em;
          margin-bottom: 10px;
          text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
      }

      .main-menu {
          background: white;
          border-radius: 15px;
          padding: 30px;
          box-shadow: 0 10px 30px rgba(0,0,0,0.2);
      }

      .exam-category {
          margin-bottom: 25px;
          padding: 20px;
          border: 2px solid #e0e0e0;
          border-radius: 10px;
          transition: all 0.3s ease;
      }

      .exam-category:hover {
          border-color: #667eea;
          transform: translateY(-2px);
          box-shadow: 0 5px 15px rgba(0,0,0,0.1);
      }

      .category-title {
          font-size: 1.3em;
          font-weight: bold;
          color: #667eea;
          margin-bottom: 15px;
      }

      .category-buttons {
          display: flex;
          gap: 15px;
          flex-wrap: wrap;
      }

      .btn {
          padding: 12px 24px;
          border: none;
          border-radius: 25px;
          cursor: pointer;
          font-size: 16px;
          font-weight: bold;
          transition: all 0.3s ease;
          text-decoration: none;
          display: inline-block;
          text-align: center;
      }

      .btn-primary {
          background: linear-gradient(45deg, #667eea, #764ba2);
          color: white;
      }

      .btn-primary:hover {
          transform: translateY(-2px);
          box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
      }

      .btn-secondary {
          background: #f8f9fa;
          color: #667eea;
          border: 2px solid #667eea;
      }

      .btn-secondary:hover {
          background: #667eea;
          color: white;
      }

      .exam-screen {
          display: none;
          background: white;
          border-radius: 15px;
          padding: 30px;
          box-shadow: 0 10px 30px rgba(0,0,0,0.2);
      }

      .exam-header {
          display: flex;
          justify-content: space-between;
          align-items: center;
          margin-bottom: 30px;
          padding-bottom: 20px;
          border-bottom: 2px solid #e0e0e0;
      }

      .progress-bar {
          background: #e0e0e0;
          height: 10px;
          border-radius: 5px;
          margin: 20px 0;
          overflow: hidden;
      }

      .progress-fill {
          background: linear-gradient(45deg, #667eea, #764ba2);
          height: 100%;
          width: 0%;
          transition: width 0.3s ease;
      }

      .timer {
          font-size: 1.5em;
          font-weight: bold;
          color: #e74c3c;
          background: #fff5f5;
          padding: 10px 20px;
          border-radius: 25px;
          border: 2px solid #e74c3c;
      }

      .question-container {
          margin: 30px 0;
      }

      .question {
          font-size: 1.4em;
          font-weight: bold;
          margin-bottom: 25px;
          color: #333;
          text-align: center;
          padding: 20px;
          background: #f8f9fa;
          border-radius: 10px;
      }

      .options {
          display: grid;
          grid-template-columns: 1fr 1fr;
          gap: 15px;
          margin: 20px 0;
      }

      .option {
          padding: 15px 20px;
          border: 2px solid #e0e0e0;
          border-radius: 10px;
          cursor: pointer;
          transition: all 0.3s ease;
          background: white;
          font-size: 1.1em;
      }

      .option:hover {
          border-color: #667eea;
          background: #f0f4ff;
      }

      .option.selected {
          border-color: #667eea;
          background: #667eea;
          color: white;
      }

      .exam-controls {
          display: flex;
          justify-content: space-between;
          margin-top: 30px;
      }

      .result-screen {
          display: none;
          background: white;
          border-radius: 15px;
          padding: 40px;
          box-shadow: 0 10px 30px rgba(0,0,0,0.2);
          text-align: center;
      }

      .score-display {
          font-size: 3em;
          font-weight: bold;
          color: #667eea;
          margin: 20px 0;
      }

      .score-details {
          background: #f8f9fa;
          padding: 20px;
          border-radius: 10px;
          margin: 20px 0;
      }

      .records-screen {
          display: none;
          background: white;
          border-radius: 15px;
          padding: 30px;
          box-shadow: 0 10px 30px rgba(0,0,0,0.2);
      }

      .record-item {
          display: flex;
          justify-content: space-between;
          align-items: center;
          padding: 15px;
          border-bottom: 1px solid #e0e0e0;
          margin-bottom: 10px;
      }

      .record-item:last-child {
          border-bottom: none;
      }

      .fast-answer-bonus {
          color: #27ae60;
          font-weight: bold;
          animation: pulse 0.5s ease-in-out;
      }

      @keyframes pulse {
          0% { transform: scale(1); }
          50% { transform: scale(1.1); }
          100% { transform: scale(1); }
      }

      .hidden {
          display: none !important;
      }

      @media (max-width: 600px) {
          .options {
              grid-template-columns: 1fr;
          }
          
          .category-buttons {
              flex-direction: column;
          }
          
          .exam-controls {
              flex-direction: column;
              gap: 15px;
          }
      }
  </style>
</head>
<body>
  <div class="container">
      <div class="header">
          <h1>🎓 英文考試系統</h1>
          <p>測試你的英文詞彙能力！</p>
      </div>

      <!-- 主選單 -->
      <div id="mainMenu" class="main-menu">
          <div class="exam-category">
              <div class="category-title">🍎 水果類 / 🐱 動物類</div>
              <div class="category-buttons">
                  <button class="btn btn-primary" onclick="startExam('fruits-animals')">開始考試</button>
                  <button class="btn btn-secondary" onclick="showRecords('fruits-animals')">查看紀錄</button>
              </div>
          </div>

          <div class="exam-category">
              <div class="category-title">🏠 家電類 / 🐛 昆蟲類</div>
              <div class="category-buttons">
                  <button class="btn btn-primary" onclick="startExam('appliances-insects')">開始考試</button>
                  <button class="btn btn-secondary" onclick="showRecords('appliances-insects')">查看紀錄</button>
              </div>
          </div>

          <div class="exam-category">
              <div class="category-title">📝 描述類 / 👤 身體類</div>
              <div class="category-buttons">
                  <button class="btn btn-primary" onclick="startExam('descriptions-body')">開始考試</button>
                  <button class="btn btn-secondary" onclick="showRecords('descriptions-body')">查看紀錄</button>
              </div>
          </div>
      </div>

      <!-- 考試畫面 -->
      <div id="examScreen" class="exam-screen">
          <div class="exam-header">
              <h2 id="examTitle">考試進行中</h2>
              <div class="timer" id="timer">10</div>
          </div>
          
          <div class="progress-bar">
              <div class="progress-fill" id="progressFill"></div>
          </div>
          
          <div class="question-container">
              <div class="question" id="question">載入中...</div>
              <div class="options" id="options"></div>
          </div>
          
          <div class="exam-controls">
              <button class="btn btn-secondary" onclick="abandonExam()">放棄考試</button>
              <div>
                  <span>題目 <span id="currentQuestion">1</span> / <span id="totalQuestions">20</span></span>
              </div>
          </div>
      </div>

      <!-- 結果畫面 -->
      <div id="resultScreen" class="result-screen">
          <h2>🎉 考試完成！</h2>
          <div class="score-display" id="finalScore">0</div>
          <div class="score-details">
              <p>正確題數: <span id="correctCount">0</span> / <span id="totalCount">20</span></p>
              <p>基本分數: <span id="baseScore">0</span> 分</p>
              <p>快速回答加分: <span id="bonusScore">0</span> 分</p>
              <p>總分: <span id="totalScore">0</span> 分</p>
          </div>
          <div class="category-buttons">
              <button class="btn btn-primary" onclick="retakeExam()">再考一次</button>
              <button class="btn btn-secondary" onclick="showRecords(currentCategory)">查看紀錄</button>
              <button class="btn btn-secondary" onclick="backToMenu()">返回主選單</button>
          </div>
      </div>

      <!-- 紀錄畫面 -->
      <div id="recordsScreen" class="records-screen">
          <h2 id="recordsTitle">考試紀錄</h2>
          <div id="recordsList"></div>
          <div style="text-align: center; margin-top: 30px;">
              <button class="btn btn-secondary" onclick="backToMenu()">返回主選單</button>
          </div>
      </div>
  </div>

  <script>
      // 題庫資料
      const questionBank = {
          'fruits-animals': [
              // 主食類 - 中文選英文
              { q: "米飯", options: ["rice", "bread", "noodles", "pasta"], correct: 0 },
              { q: "麵包", options: ["rice", "bread", "oatmeal", "porridge"], correct: 1 },
              { q: "麵條", options: ["pasta", "noodles", "ramen", "udon"], correct: 1 },
              { q: "義大利麵", options: ["noodles", "pasta", "soba", "vermicelli"], correct: 1 },
              { q: "拉麵", options: ["udon", "ramen", "soba", "noodles"], correct: 1 },
              { q: "烏龍麵", options: ["ramen", "udon", "soba", "pasta"], correct: 1 },
              { q: "蕎麥麵", options: ["udon", "soba", "ramen", "vermicelli"], correct: 1 },
              { q: "河粉", options: ["vermicelli", "rice noodles", "noodles", "pasta"], correct: 1 },
              { q: "米粉", options: ["rice noodles", "vermicelli", "soba", "udon"], correct: 1 },
              { q: "饅頭", options: ["bun", "steamed bun", "dumpling", "sesame cake"], correct: 1 },
              { q: "包子", options: ["steamed bun", "bun", "dumpling", "bread"], correct: 1 },
              { q: "餃子", options: ["bun", "dumpling", "steamed bun", "sesame cake"], correct: 1 },
              { q: "燒餅", options: ["bread", "sesame cake", "steamed bun", "oatmeal"], correct: 1 },
              { q: "粥", options: ["oatmeal", "porridge", "rice", "bread"], correct: 1 },
              { q: "燕麥", options: ["porridge", "oatmeal", "rice", "corn"], correct: 1 },
              { q: "玉米", options: ["potato", "corn", "sweet potato", "pumpkin"], correct: 1 },
              { q: "馬鈴薯", options: ["sweet potato", "potato", "taro", "corn"], correct: 1 },
              { q: "地瓜", options: ["potato", "sweet potato", "taro", "pumpkin"], correct: 1 },
              { q: "芋頭", options: ["sweet potato", "taro", "potato", "pumpkin"], correct: 1 },
              { q: "南瓜", options: ["sweet potato", "pumpkin", "taro", "corn"], correct: 1 },

              // 肉類 - 中文選英文
              { q: "豬肉", options: ["beef", "pork", "lamb", "chicken"], correct: 1 },
              { q: "牛肉", options: ["pork", "beef", "lamb", "duck"], correct: 1 },
              { q: "雞肉", options: ["duck", "chicken", "turkey", "goose"], correct: 1 },
              { q: "鴨肉", options: ["chicken", "duck", "goose", "turkey"], correct: 1 },
              { q: "羊肉", options: ["beef", "lamb", "pork", "venison"], correct: 1 },
              { q: "火腿", options: ["bacon", "ham", "sausage", "hot dog"], correct: 1 },
              { q: "香腸", options: ["hot dog", "sausage", "ham", "bacon"], correct: 1 },
              { q: "熱狗", options: ["sausage", "hot dog", "ham", "patty"], correct: 1 },
              { q: "培根", options: ["ham", "bacon", "sausage", "pork floss"], correct: 1 },
              { q: "肉鬆", options: ["bacon", "pork floss", "ham", "preserved meat"], correct: 1 },
              { q: "牛排", options: ["pork chop", "steak", "beef", "patty"], correct: 1 },
              { q: "炸雞", options: ["roasted chicken", "fried chicken", "chicken wings", "chicken leg"], correct: 1 },
              { q: "烤雞", options: ["fried chicken", "roasted chicken", "chicken wings", "barbecue"], correct: 1 },
              { q: "雞翅", options: ["chicken leg", "chicken wings", "fried chicken", "roasted chicken"], correct: 1 },
              { q: "雞腿", options: ["chicken wings", "chicken leg", "fried chicken", "duck"], correct: 1 },
              { q: "豬排", options: ["steak", "pork chop", "char siu", "patty"], correct: 1 },
              { q: "叉燒", options: ["barbecue", "char siu", "pork chop", "preserved meat"], correct: 1 },
              { q: "燒肉", options: ["char siu", "barbecue", "roasted chicken", "steak"], correct: 1 },
              { q: "肉丸", options: ["patty", "meatball", "pork chop", "sausage"], correct: 1 },
              { q: "漢堡肉", options: ["meatball", "patty", "steak", "pork chop"], correct: 1 },
              { q: "火雞", options: ["chicken", "turkey", "duck", "goose"], correct: 1 },
              { q: "鵝肉", options: ["duck", "goose", "turkey", "chicken"], correct: 1 },
              { q: "兔肉", options: ["lamb", "rabbit", "venison", "duck"], correct: 1 },
              { q: "鹿肉", options: ["rabbit", "venison", "lamb", "goose"], correct: 1 },
              { q: "臘肉", options: ["bacon", "preserved meat", "ham", "pork floss"], correct: 1 },

              // 海鮮類 - 中文選英文
              { q: "魚", options: ["shrimp", "fish", "crab", "squid"], correct: 1 },
              { q: "鮭魚", options: ["tuna", "salmon", "mackerel", "cod"], correct: 1 },
              { q: "鮪魚", options: ["salmon", "tuna", "mackerel", "flounder"], correct: 1 },
              { q: "鯖魚", options: ["tuna", "mackerel", "salmon", "saury"], correct: 1 },
              { q: "比目魚", options: ["cod", "flounder", "grouper", "tilapia"], correct: 1 },
              { q: "蝦", options: ["crab", "shrimp", "lobster", "squid"], correct: 1 },
              { q: "螃蟹", options: ["shrimp", "crab", "lobster", "octopus"], correct: 1 },
              { q: "龍蝦", options: ["crab", "lobster", "shrimp", "abalone"], correct: 1 },
              { q: "牡蠣", options: ["clam", "oyster", "scallop", "abalone"], correct: 1 },
              { q: "蛤蜊", options: ["oyster", "clam", "scallop", "sea cucumber"], correct: 1 },
              { q: "扇貝", options: ["clam", "scallop", "oyster", "dried scallop"], correct: 1 },
              { q: "魷魚", options: ["octopus", "squid", "eel", "fish"], correct: 1 },
              { q: "章魚", options: ["squid", "octopus", "eel", "sea cucumber"], correct: 1 },
              { q: "海帶", options: ["laver", "seaweed", "sea cucumber", "fish"], correct: 1 },
              { q: "紫菜", options: ["seaweed", "laver", "sea cucumber", "clam"], correct: 1 },
              { q: "鰻魚", options: ["squid", "eel", "octopus", "cod"], correct: 1 },
              { q: "鱈魚", options: ["flounder", "cod", "grouper", "salmon"], correct: 1 },
              { q: "石斑魚", options: ["cod", "grouper", "flounder", "tilapia"], correct: 1 },
              { q: "虱目魚", options: ["tilapia", "milkfish", "grouper", "saury"], correct: 1 },
              { q: "秋刀魚", options: ["mackerel", "saury", "milkfish", "eel"], correct: 1 },
              { q: "吳郭魚", options: ["milkfish", "tilapia", "grouper", "flounder"], correct: 1 },
              { q: "海參", options: ["octopus", "sea cucumber", "abalone", "laver"], correct: 1 },
              { q: "鮑魚", options: ["sea cucumber", "abalone", "oyster", "lobster"], correct: 1 },
              { q: "干貝", options: ["scallop", "dried scallop", "clam", "oyster"], correct: 1 },
              { q: "魚丸", options: ["fish", "fish ball", "meatball", "squid"], correct: 1 },

              // 蔬菜類 - 中文選英文
              { q: "高麗菜", options: ["lettuce", "cabbage", "bok choy", "spinach"], correct: 1 },
              { q: "菠菜", options: ["cabbage", "spinach", "lettuce", "water spinach"], correct: 1 },
              { q: "青江菜", options: ["spinach", "bok choy", "cabbage", "lettuce"], correct: 1 },
              { q: "萵苣", options: ["bok choy", "lettuce", "cabbage", "spinach"], correct: 1 },
              { q: "花椰菜", options: ["broccoli", "cauliflower", "cabbage", "lettuce"], correct: 1 },
              { q: "青花菜", options: ["cauliflower", "broccoli", "asparagus", "green bean"], correct: 1 },
              { q: "紅蘿蔔", options: ["radish", "carrot", "ginger", "lotus root"], correct: 1 },
              { q: "白蘿蔔", options: ["carrot", "radish", "ginger", "lotus root"], correct: 1 },
              { q: "洋蔥", options: ["garlic", "onion", "leek", "ginger"], correct: 1 },
              { q: "大蒜", options: ["onion", "garlic", "ginger", "leek"], correct: 1 },
              { q: "薑", options: ["garlic", "ginger", "onion", "radish"], correct: 1 },
              { q: "韭菜", options: ["celery", "leek", "green bean", "asparagus"], correct: 1 },
              { q: "芹菜", options: ["leek", "celery", "asparagus", "green bean"], correct: 1 },
              { q: "茄子", options: ["tomato", "eggplant", "bell pepper", "cucumber"], correct: 1 },
              { q: "番茄", options: ["eggplant", "tomato", "bell pepper", "chili"], correct: 1 },
              { q: "小黃瓜", options: ["loofah", "cucumber", "winter melon", "bitter gourd"], correct: 1 },
              { q: "絲瓜", options: ["cucumber", "loofah", "winter melon", "bitter gourd"], correct: 1 },
              { q: "冬瓜", options: ["bitter gourd", "winter melon", "loofah", "cucumber"], correct: 1 },
              { q: "苦瓜", options: ["winter melon", "bitter gourd", "loofah", "cucumber"], correct: 1 },
              { q: "辣椒", options: ["bell pepper", "chili", "tomato", "eggplant"], correct: 1 },
              { q: "青椒", options: ["chili", "bell pepper", "tomato", "eggplant"], correct: 1 },
              { q: "玉米筍", options: ["bamboo shoot", "baby corn", "asparagus", "bean sprout"], correct: 1 },
              { q: "竹筍", options: ["baby corn", "bamboo shoot", "asparagus", "lotus root"], correct: 1 },
              { q: "豆芽菜", options: ["asparagus", "bean sprout", "baby corn", "green bean"], correct: 1 },
              { q: "空心菜", options: ["spinach", "water spinach", "bok choy", "lettuce"], correct: 1 },
              { q: "蘆筍", options: ["celery", "asparagus", "leek", "green bean"], correct: 1 },
              { q: "四季豆", options: ["pea", "green bean", "edamame", "bean sprout"], correct: 1 },
              { q: "豌豆", options: ["green bean", "pea", "edamame", "bean sprout"], correct: 1 },
              { q: "毛豆", options: ["pea", "edamame", "green bean", "bean sprout"], correct: 1 },
              { q: "蓮藕", options: ["radish", "lotus root", "bamboo shoot", "ginger"], correct: 1 },

              // 水果類 - 中文選英文
              { q: "蘋果", options: ["orange", "apple", "grape", "pear"], correct: 1 },
              { q: "香蕉", options: ["mango", "banana", "pineapple", "papaya"], correct: 1 },
              { q: "橘子", options: ["apple", "orange", "tangerine", "grapefruit"], correct: 1 },
              { q: "葡萄", options: ["cherry", "grape", "blueberry", "strawberry"], correct: 1 },
              { q: "西瓜", options: ["cantaloupe", "watermelon", "papaya", "coconut"], correct: 1 },
              { q: "哈密瓜", options: ["watermelon", "cantaloupe", "papaya", "coconut"], correct: 1 },
              { q: "草莓", options: ["raspberry", "strawberry", "cherry", "blueberry"], correct: 1 },
              { q: "櫻桃", options: ["strawberry", "cherry", "grape", "plum"], correct: 1 },
              { q: "桃子", options: ["pear", "peach", "plum", "apricot"], correct: 1 },
              { q: "梨子", options: ["peach", "pear", "apple", "plum"], correct: 1 },
              { q: "檸檬", options: ["lime", "lemon", "orange", "grapefruit"], correct: 1 },
              { q: "萊姆", options: ["lemon", "lime", "kiwi", "avocado"], correct: 1 },
              { q: "芒果", options: ["papaya", "mango", "pineapple", "banana"], correct: 1 },
              { q: "鳳梨", options: ["mango", "pineapple", "papaya", "coconut"], correct: 1 },
              { q: "奇異果", options: ["avocado", "kiwi", "lime", "grape"], correct: 1 },
              { q: "酪梨", options: ["kiwi", "avocado", "lime", "coconut"], correct: 1 },
              { q: "藍莓", options: ["blackberry", "blueberry", "raspberry", "grape"], correct: 1 },
              { q: "覆盆子", options: ["blueberry", "raspberry", "strawberry", "blackberry"], correct: 1 },
              { q: "黑莓", options: ["raspberry", "blackberry", "blueberry", "mulberry"], correct: 1 },
              { q: "椰子", options: ["avocado", "coconut", "cantaloupe", "watermelon"], correct: 1 },
              { q: "木瓜", options: ["mango", "papaya", "pineapple", "cantaloupe"], correct: 1 },
              { q: "火龍果", options: ["kiwi", "dragon fruit", "star fruit", "passion fruit"], correct: 1 },
              { q: "荔枝", options: ["longan", "lychee", "rambutan", "mangosteen"], correct: 1 },
              { q: "龍眼", options: ["lychee", "longan", "rambutan", "jujube"], correct: 1 },
              { q: "柿子", options: ["apricot", "persimmon", "plum", "fig"], correct: 1 },
              { q: "葡萄柚", options: ["orange", "grapefruit", "tangerine", "lemon"], correct: 1 },
              { q: "橙子", options: ["orange", "tangerine", "grapefruit", "lemon"], correct: 1 },
              { q: "李子", options: ["peach", "plum", "apricot", "cherry"], correct: 1 },
              { q: "杏子", options: ["plum", "apricot", "peach", "persimmon"], correct: 1 },
              { q: "無花果", options: ["persimmon", "fig", "pomegranate", "guava"], correct: 1 },
              { q: "石榴", options: ["fig", "pomegranate", "guava", "passion fruit"], correct: 1 },
              { q: "百香果", options: ["guava", "passion fruit", "dragon fruit", "star fruit"], correct: 1 },
              { q: "番石榴", options: ["passion fruit", "guava", "pomegranate", "fig"], correct: 1 },
              { q: "蓮霧", options: ["guava", "wax apple", "sugar apple", "star fruit"], correct: 1 },
              { q: "楊桃", options: ["dragon fruit", "star fruit", "passion fruit", "wax apple"], correct: 1 },
              { q: "釋迦", options: ["wax apple", "sugar apple", "guava", "durian"], correct: 1 },
              { q: "榴槤", options: ["sugar apple", "durian", "mangosteen", "rambutan"], correct: 1 },
              { q: "山竹", options: ["durian", "mangosteen", "rambutan", "lychee"], correct: 1 },
              { q: "紅毛丹", options: ["lychee", "rambutan", "longan", "mangosteen"], correct: 1 },
              { q: "棗子", options: ["longan", "jujube", "loquat", "persimmon"], correct: 1 },
              { q: "枇杷", options: ["jujube", "loquat", "apricot", "persimmon"], correct: 1 },
              { q: "桑葚", options: ["blackberry", "mulberry", "blueberry", "blackcurrant"], correct: 1 },
              { q: "葡萄乾", options: ["grape", "raisin", "cranberry", "goji berry"], correct: 1 },
              { q: "蔓越莓", options: ["raisin", "cranberry", "goji berry", "blackcurrant"], correct: 1 },
              { q: "黑醋栗", options: ["redcurrant", "blackcurrant", "cranberry", "blackberry"], correct: 1 },
              { q: "紅醋栗", options: ["blackcurrant", "redcurrant", "cranberry", "raspberry"], correct: 1 },
              { q: "枸杞", options: ["cranberry", "goji berry", "raisin", "jujube"], correct: 1 },

              豆類製品 (15個)
              // 豆類堅果 - 中文選英文
              { q: "豆腐", options: ["soy milk", "tofu", "dried tofu", "tofu skin"], correct: 1 },
              { q: "豆漿", options: ["tofu", "soy milk", "miso", "natto"], correct: 1 },
              { q: "豆干", options: ["tofu", "dried tofu", "fried tofu", "tofu skin"], correct: 1 },
              { q: "油豆腐", options: ["dried tofu", "fried tofu", "stinky tofu", "tofu"], correct: 1 },
              { q: "臭豆腐", options: ["fried tofu", "stinky tofu", "dried tofu", "tofu skin"], correct: 1 },
              { q: "豆皮", options: ["dried tofu", "tofu skin", "fried tofu", "soy milk"], correct: 1 },
              { q: "納豆", options: ["miso", "natto", "tofu", "soy milk"], correct: 1 },
              { q: "味噌", options: ["natto", "miso", "soy milk", "tofu"], correct: 1 },
              { q: "紅豆", options: ["mung bean", "red bean", "black bean", "green bean"], correct: 1 },
              { q: "綠豆", options: ["red bean", "mung bean", "black bean", "green bean"], correct: 1 },
              { q: "黑豆", options: ["red bean", "black bean", "mung bean", "soy bean"], correct: 1 },
              { q: "花生", options: ["cashew", "peanut", "almond", "walnut"], correct: 1 },
              { q: "腰果", options: ["peanut", "cashew", "almond", "walnut"], correct: 1 },
              { q: "杏仁", options: ["walnut", "almond", "cashew", "peanut"], correct: 1 },
              { q: "核桃", options: ["almond", "walnut", "cashew", "peanut"], correct: 1 },

              // 乳製品 - 中文選英文
              { q: "牛奶", options: ["cream", "milk", "soy milk", "milk powder"], correct: 1 },
              { q: "起司", options: ["butter", "cheese", "cheddar", "cream"], correct: 1 },
              { q: "奶油", options: ["cream", "butter", "milk", "yogurt"], correct: 1 },
              { q: "優格", options: ["pudding", "yogurt", "cream", "milk"], correct: 1 },
              { q: "鮮奶油", options: ["butter", "cream", "milk", "condensed milk"], correct: 1 },
              { q: "煉乳", options: ["milk", "condensed milk", "cream", "milk powder"], correct: 1 },
              { q: "奶粉", options: ["condensed milk", "milk powder", "milk", "cream"], correct: 1 },
              { q: "冰淇淋", options: ["milkshake", "ice cream", "pudding", "yogurt"], correct: 1 },
              { q: "布丁", options: ["yogurt", "pudding", "ice cream", "cream"], correct: 1 },
              { q: "奶昔", options: ["ice cream", "milkshake", "milk", "cream"], correct: 1 },
              { q: "起司蛋糕", options: ["ice cream", "cheesecake", "pudding", "cake"], correct: 1 },
              { q: "切達起司", options: ["cheese", "cheddar", "butter", "cream"], correct: 1 },

              // 甜點糕餅 - 中文選英文
              { q: "餅乾", options: ["cake", "cookie", "cracker", "waffle"], correct: 1 },
              { q: "蛋糕", options: ["cookie", "cake", "pie", "rice cake"], correct: 1 },
              { q: "巧克力", options: ["candy", "chocolate", "cocoa", "cookie"], correct: 1 },
              { q: "糖果", options: ["chocolate", "candy", "marshmallow", "jelly"], correct: 1 },
              { q: "棉花糖", options: ["candy", "marshmallow", "jelly", "cotton"], correct: 1 },
              { q: "果凍", options: ["marshmallow", "jelly", "pudding", "mousse"], correct: 1 },
              { q: "甜甜圈", options: ["cookie", "donut", "bagel", "cake"], correct: 1 },
              { q: "馬卡龍", options: ["cookie", "macaron", "cream puff", "souffle"], correct: 1 },
              { q: "泡芙", options: ["macaron", "cream puff", "souffle", "donut"], correct: 1 },
              { q: "鬆餅", options: ["pancake", "waffle", "cake", "cookie"], correct: 1 },
              { q: "薄餅", options: ["waffle", "pancake", "crepe", "cake"], correct: 1 },
              { q: "派", options: ["cake", "pie", "tart", "pizza"], correct: 1 },
              { q: "提拉米蘇", options: ["mousse", "tiramisu", "souffle", "cake"], correct: 1 },
              { q: "慕斯", options: ["tiramisu", "mousse", "souffle", "pudding"], correct: 1 },
              { q: "舒芙蕾", options: ["mousse", "souffle", "cream puff", "tiramisu"], correct: 1 },
              { q: "年糕", options: ["cake", "rice cake", "mochi", "dumpling"], correct: 1 },
              { q: "湯圓", options: ["dumpling", "tangyuan", "mochi", "rice cake"], correct: 1 },

              // 速食輕食 - 中文選英文
              { q: "漢堡", options: ["sandwich", "hamburger", "burger", "hot dog"], correct: 1 },
              { q: "薯條", options: ["potato chips", "french fries", "fries", "chips"], correct: 1 },
              { q: "披薩", options: ["pie", "pizza", "pancake", "flatbread"], correct: 1 },
              { q: "三明治", options: ["hamburger", "sandwich", "toast", "submarine sandwich"], correct: 1 },
              { q: "潛艇堡", options: ["sandwich", "submarine sandwich", "hamburger", "hot dog"], correct: 1 },
              { q: "可樂餅", options: ["nuggets", "croquette", "fritter", "dumpling"], correct: 1 },
              { q: "雞塊", options: ["croquette", "chicken nuggets", "fried chicken", "popcorn chicken"], correct: 1 },
              { q: "洋蔥圈", options: ["french fries", "onion rings", "fried onion", "rings"], correct: 1 },
              { q: "蛋餅", options: ["pancake", "egg pancake", "omelet", "crepe"], correct: 1 },
              { q: "肉包", options: ["dumpling", "meat bun", "steamed bun", "bao"], correct: 1 },
              { q: "便當", options: ["lunch box", "bento", "meal", "takeout"], correct: 1 },

              // 調味料配料 - 中文選英文
              { q: "雞蛋", options: ["duck egg", "egg", "century egg", "yolk"], correct: 1 },
              { q: "鹹鴨蛋", options: ["egg", "salted duck egg", "century egg", "duck egg"], correct: 1 },
              { q: "皮蛋", options: ["salted duck egg", "century egg", "preserved egg", "black egg"], correct: 1 },
              { q: "蜂蜜", options: ["syrup", "honey", "jam", "sugar"], correct: 1 },
              { q: "果醬", options: ["honey", "jam", "jelly", "preserve"], correct: 1 },
              { q: "花生醬", options: ["jam", "peanut butter", "butter", "nut butter"], correct: 1 },
              { q: "芝麻", options: ["seed", "sesame", "sunflower", "peanut"], correct: 1 },
              { q: "醋", options: ["sauce", "vinegar", "wine", "acid"], correct: 1 },
              { q: "醬油", options: ["vinegar", "soy sauce", "fish sauce", "oyster sauce"], correct: 1 },
              { q: "鹽", options: ["sugar", "salt", "pepper", "powder"], correct: 1 },
              { q: "糖", options: ["salt", "sugar", "honey", "syrup"], correct: 1 },
              { q: "胡椒", options: ["salt", "pepper", "spice", "chili"], correct: 1 },
              { q: "辣椒粉", options: ["pepper", "chili powder", "curry powder", "paprika"], correct: 1 },
              { q: "咖哩粉", options: ["chili powder", "curry powder", "turmeric", "spice"], correct: 1 },
              { q: "番茄醬", options: ["sauce", "ketchup", "tomato sauce", "paste"], correct: 1 },
              { q: "美乃滋", options: ["ketchup", "mayonnaise", "cream", "dressing"], correct: 1 },
              { q: "芥末", options: ["mayonnaise", "mustard", "wasabi", "horseradish"], correct: 1 },
              { q: "橄欖油", options: ["oil", "olive oil", "vegetable oil", "cooking oil"], correct: 1 },
              { q: "香草", options: ["herb", "vanilla", "mint", "basil"], correct: 1 },
              { q: "肉桂", options: ["vanilla", "cinnamon", "nutmeg", "clove"], correct: 1 }              
          ],

          'appliances-insects': [
              {q: 'Refrigerator', options: ['冰箱', '洗衣機', '烤箱', '微波爐'], correct: 0},
              {q: 'Butterfly', options: ['蜜蜂', '蝴蝶', '蜻蜓', '螞蟻'], correct: 1},
              {q: 'Television', options: ['收音機', '電視', '電腦', '手機'], correct: 1},
              {q: 'Ant', options: ['螞蟻', '蜘蛛', '蟑螂', '蚊子'], correct: 0},
              {q: 'Washing Machine', options: ['洗碗機', '烘乾機', '洗衣機', '吸塵器'], correct: 2},
              {q: 'Bee', options: ['黃蜂', '蜜蜂', '大黃蜂', '蒼蝇'], correct: 1},
              {q: 'Microwave', options: ['烤箱', '微波爐', '電鍋', '氣炸鍋'], correct: 1},
              {q: 'Spider', options: ['蜘蛛', '蠍子', '蜈蚣', '壁虎'], correct: 0},
              {q: 'Air Conditioner', options: ['電風扇', '除濕機', '冷氣機', '暖氣機'], correct: 2},
              {q: 'Mosquito', options: ['蚊子', '蒼蝇', '蚋', '蠓'], correct: 0},
              {q: 'Vacuum Cleaner', options: ['掃把', '拖把', '吸塵器', '蒸氣拖把'], correct: 2},
              {q: 'Dragonfly', options: ['蝴蝶', '蜻蜓', '蛾', '蚱蜢'], correct: 1},
              {q: 'Dishwasher', options: ['洗衣機', '洗碗機', '烘碗機', '消毒櫃'], correct: 1},
              {q: 'Cockroach', options: ['甲蟲', '蟑螂', '蟋蟀', '螞蚱'], correct: 1},
              {q: 'Oven', options: ['烤箱', '微波爐', '蒸爐', '電鍋'], correct: 0},
              {q: 'Grasshopper', options: ['蚱蜢', '蟋蟀', '螞蚱', '蝗蟲'], correct: 0},
              {q: 'Blender', options: ['果汁機', '攪拌機', '食物調理機', '咖啡機'], correct: 1},
              {q: 'Ladybug', options: ['瓢蟲', '金龜子', '獨角仙', '鍬形蟲'], correct: 0},
              {q: 'Hair Dryer', options: ['吹風機', '直髮器', '捲髮器', '理髮器'], correct: 0},
              {q: 'Beetle', options: ['蟬', '甲蟲', '蝉', '金蟬'], correct: 1}
          ],
          'descriptions-body': [
              {q: 'Beautiful', options: ['美麗的', '醜陋的', '可愛的', '迷人的'], correct: 0},
              {q: 'Head', options: ['手', '腳', '頭', '身體'], correct: 2},
              {q: 'Happy', options: ['悲傷的', '快樂的', '生氣的', '害怕的'], correct: 1},
              {q: 'Hand', options: ['手', '腳', '臂', '指'], correct: 0},
              {q: 'Big', options: ['小的', '大的', '高的', '矮的'], correct: 1},
              {q: 'Eye', options: ['耳朵', '鼻子', '眼睛', '嘴巴'], correct: 2},
              {q: 'Cold', options: ['熱的', '溫暖的', '冷的', '涼的'], correct: 2},
              {q: 'Foot', options: ['手', '腳', '腿', '膝蓋'], correct: 1},
              {q: 'Fast', options: ['慢的', '快的', '急的', '緩的'], correct: 1},
              {q: 'Nose', options: ['眼睛', '耳朵', '鼻子', '嘴巴'], correct: 2},
              {q: 'Tall', options: ['矮的', '高的', '大的', '小的'], correct: 1},
              {q: 'Mouth', options: ['鼻子', '嘴巴', '下巴', '臉頰'], correct: 1},
              {q: 'Heavy', options: ['輕的', '重的', '厚的', '薄的'], correct: 1},
              {q: 'Ear', options: ['耳朵', '眼睛', '鼻子', '頭髮'], correct: 0},
              {q: 'Bright', options: ['暗的', '亮的', '黑的', '白的'], correct: 1},
              {q: 'Arm', options: ['腿', '手臂', '肩膀', '手肘'], correct: 1},
              {q: 'Soft', options: ['硬的', '軟的', '粗的', '細的'], correct: 1},
              {q: 'Leg', options: ['手', '腿', '腳', '膝蓋'], correct: 1},
              {q: 'Strong', options: ['弱的', '強的', '壯的', '瘦的'], correct: 1},
              {q: 'Finger', options: ['手指', '腳趾', '手掌', '手腕'], correct: 0}
          ]
      };

// ========== 考試設定區 (可自由修改) ==========
const EXAM_CONFIG = {
    // 考題設定
    QUESTION_COUNT: 10,          // 考題數量 (設為 0 表示全部題目)
    
    // 時間設定
    TIME_PER_QUESTION: 10,       // 每題時間 (秒)
    FAST_ANSWER_TIME: 3,         // 快速回答時間門檻 (秒)
    ANSWER_DISPLAY_TIME: 1.5,    // 答案顯示時間 (秒)
    
    // 分數設定
    BASE_POINTS: 10,             // 基本分數
    BONUS_POINTS: 5,             // 快速回答加分
    
    // 其他設定
    SHUFFLE_QUESTIONS: true,     // 是否隨機排列題目
    SHUFFLE_OPTIONS: true,       // 是否隨機排列選項
    SHOW_PROGRESS: true,         // 是否顯示進度條
    AUTO_NEXT: true              // 是否自動進入下一題
};
// ===============================================

// 全域變數
let currentCategory = '';
let currentQuestions = [];
let currentQuestionIndex = 0;
let score = 0;
let correctAnswers = 0;
let bonusPoints = 0;
let timer = null;
let timeLeft = EXAM_CONFIG.TIME_PER_QUESTION;
let questionStartTime = 0;

// 開始考試
function startExam(category) {
    currentCategory = category;
    
    // 根據設定準備題目
    let allQuestions = [...questionBank[category]];
    if (EXAM_CONFIG.QUESTION_COUNT === 0 || EXAM_CONFIG.QUESTION_COUNT >= allQuestions.length) {
        currentQuestions = EXAM_CONFIG.SHUFFLE_QUESTIONS ? shuffleArray(allQuestions) : allQuestions;
    } else {
        currentQuestions = EXAM_CONFIG.SHUFFLE_QUESTIONS ? 
            shuffleArray(allQuestions).slice(0, EXAM_CONFIG.QUESTION_COUNT) : 
            allQuestions.slice(0, EXAM_CONFIG.QUESTION_COUNT);
    }
    
    currentQuestionIndex = 0;
    score = 0;
    correctAnswers = 0;
    bonusPoints = 0;
    
    // 隨機化選項位置 (根據設定)
    if (EXAM_CONFIG.SHUFFLE_OPTIONS) {
        currentQuestions.forEach(q => {
            const correctAnswer = q.options[q.correct];
            q.options = shuffleArray([...q.options]);
            q.correct = q.options.indexOf(correctAnswer);
        });
    }
    
    document.getElementById('mainMenu').style.display = 'none';
    document.getElementById('examScreen').style.display = 'block';
    
    const titles = {
        'fruits-animals': '🍎 水果類 / 🐱 動物類',
        'appliances-insects': '🏠 家電類 / 🐛 昆蟲類',
        'descriptions-body': '📝 描述類 / 👤 身體類'
    };
    
    document.getElementById('examTitle').textContent = titles[category];
    document.getElementById('totalQuestions').textContent = currentQuestions.length;
    
    showQuestion();
}

// 顯示題目
function showQuestion() {
    if (currentQuestionIndex >= currentQuestions.length) {
        showResult();
        return;
    }
    
    const question = currentQuestions[currentQuestionIndex];
    document.getElementById('question').textContent = question.q;
    document.getElementById('currentQuestion').textContent = currentQuestionIndex + 1;
    
    const optionsContainer = document.getElementById('options');
    optionsContainer.innerHTML = '';
    
    question.options.forEach((option, index) => {
        const optionDiv = document.createElement('div');
        optionDiv.className = 'option';
        optionDiv.textContent = option;
        optionDiv.onclick = () => selectAnswer(index);
        optionsContainer.appendChild(optionDiv);
    });
    
    // 更新進度條 (根據設定)
    if (EXAM_CONFIG.SHOW_PROGRESS) {
        const progress = ((currentQuestionIndex) / currentQuestions.length) * 100;
        document.getElementById('progressFill').style.width = progress + '%';
    }
    
    // 開始計時
    startTimer();
}

// 開始計時器
function startTimer() {
    timeLeft = EXAM_CONFIG.TIME_PER_QUESTION;
    questionStartTime = Date.now();
    updateTimerDisplay();
    
    timer = setInterval(() => {
        timeLeft--;
        updateTimerDisplay();
        
        if (timeLeft <= 0) {
            clearInterval(timer);
            selectAnswer(-1); // 時間到，自動選擇錯誤答案
        }
    }, 1000);
}

// 更新計時器顯示
function updateTimerDisplay() {
    const timerElement = document.getElementById('timer');
    timerElement.textContent = timeLeft;
    
    if (timeLeft <= 3) {
        timerElement.style.color = '#e74c3c';
        timerElement.style.animation = 'pulse 0.5s infinite';
    } else {
        timerElement.style.color = '#27ae60';
        timerElement.style.animation = 'none';
    }
}

// 選擇答案
function selectAnswer(selectedIndex) {
    clearInterval(timer);
    
    const question = currentQuestions[currentQuestionIndex];
    const options = document.querySelectorAll('.option');
    
    // 顯示正確答案
    options.forEach((option, index) => {
        if (index === question.correct) {
            option.style.background = '#27ae60';
            option.style.color = 'white';
            option.style.borderColor = '#27ae60';
        } else if (index === selectedIndex && selectedIndex !== question.correct) {
            option.style.background = '#e74c3c';
            option.style.color = 'white';
            option.style.borderColor = '#e74c3c';
        }
        option.style.pointerEvents = 'none';
    });
    
    // 計算分數
    if (selectedIndex === question.correct) {
        correctAnswers++;
        score += EXAM_CONFIG.BASE_POINTS; // 使用設定的基本分數
        
        // 檢查快速回答加分
        const answerTime = (Date.now() - questionStartTime) / 1000;
        if (answerTime <= EXAM_CONFIG.FAST_ANSWER_TIME) {
            bonusPoints += EXAM_CONFIG.BONUS_POINTS;
            score += EXAM_CONFIG.BONUS_POINTS;
            
            // 顯示快速回答提示
            const bonusDiv = document.createElement('div');
            bonusDiv.className = 'fast-answer-bonus';
            bonusDiv.textContent = `⚡ 快速回答 +${EXAM_CONFIG.BONUS_POINTS}分!`;
            bonusDiv.style.position = 'fixed';
            bonusDiv.style.top = '50%';
            bonusDiv.style.left = '50%';
            bonusDiv.style.transform = 'translate(-50%, -50%)';
            bonusDiv.style.fontSize = '1.5em';
            bonusDiv.style.zIndex = '1000';
            document.body.appendChild(bonusDiv);
            
            setTimeout(() => {
                document.body.removeChild(bonusDiv);
            }, 1500);
        }
    }
    
    // 延遲顯示下一題 (使用設定的等待時間)
    if (EXAM_CONFIG.AUTO_NEXT) {
        setTimeout(() => {
            currentQuestionIndex++;
            showQuestion();
        }, EXAM_CONFIG.ANSWER_DISPLAY_TIME * 1000);
    }
}

// 顯示結果
function showResult() {
    document.getElementById('examScreen').style.display = 'none';
    document.getElementById('resultScreen').style.display = 'block';
    
    const baseScore = correctAnswers * EXAM_CONFIG.BASE_POINTS;
    
    document.getElementById('finalScore').textContent = score + ' 分';
    document.getElementById('correctCount').textContent = correctAnswers;
    document.getElementById('totalCount').textContent = currentQuestions.length;
    document.getElementById('baseScore').textContent = baseScore;
    document.getElementById('bonusScore').textContent = bonusPoints;
    document.getElementById('totalScore').textContent = score;
    
    // 儲存記錄
    saveRecord();
}

// 儲存記錄
function saveRecord() {
    const records = JSON.parse(localStorage.getItem('examRecords') || '{}');
    if (!records[currentCategory]) {
        records[currentCategory] = [];
    }
    
    const record = {
        date: new Date().toLocaleString('zh-TW'),
        score: score,
        correct: correctAnswers,
        total: currentQuestions.length,
        bonus: bonusPoints
    };
    
    records[currentCategory].push(record);
    records[currentCategory].sort((a, b) => b.score - a.score); // 按分數排序
    
    localStorage.setItem('examRecords', JSON.stringify(records));
}

// 顯示記錄
function showRecords(category) {
    currentCategory = category;
    document.getElementById('mainMenu').style.display = 'none';
    document.getElementById('recordsScreen').style.display = 'block';
    
    const titles = {
        'fruits-animals': '🍎 水果類 / 🐱 動物類',
        'appliances-insects': '🏠 家電類 / 🐛 昆蟲類',
        'descriptions-body': '📝 描述類 / 👤 身體類'
    };
    
    document.getElementById('recordsTitle').textContent = titles[category] + ' - 考試紀錄';
    
    const records = JSON.parse(localStorage.getItem('examRecords') || '{}');
    const categoryRecords = records[category] || [];
    
    const recordsList = document.getElementById('recordsList');
    recordsList.innerHTML = '';
    
    if (categoryRecords.length === 0) {
        recordsList.innerHTML = '<p style="text-align: center; color: #666;">尚無考試記錄</p>';
    } else {
        categoryRecords.forEach((record, index) => {
            const recordDiv = document.createElement('div');
            recordDiv.className = 'record-item';
            recordDiv.innerHTML = `
                <div>
                    <strong>#${index + 1}</strong> ${record.date}
                </div>
                <div>
                    <span style="color: #667eea; font-weight: bold;">${record.score}分</span>
                    <small>(${record.correct}/${record.total}) ${record.bonus > 0 ? '+' + record.bonus + '快速分' : ''}</small>
                </div>
            `;
            recordsList.appendChild(recordDiv);
        });
    }
}

// 放棄考試
function abandonExam() {
    if (confirm('確定要放棄考試嗎？')) {
        clearInterval(timer);
        backToMenu();
    }
}

// 再考一次
function retakeExam() {
    startExam(currentCategory);
}

// 返回主選單
function backToMenu() {
    document.getElementById('examScreen').style.display = 'none';
    document.getElementById('resultScreen').style.display = 'none';
    document.getElementById('recordsScreen').style.display = 'none';
    document.getElementById('mainMenu').style.display = 'block';
}

// 洗牌函數
function shuffleArray(array) {
    const shuffled = [...array];
    for (let i = shuffled.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
    }
    return shuffled;
}
  </script>
</body>
</html>
